# CoreSolution 문서화 계획

**작성일**: 2025-11-20  
**버전**: 1.0.0  
**상태**: 계획 수립

---

## 📋 개요

CoreSolution 표준화 작업 완료 후, 시스템의 전체 구조를 문서화하여 향후 개발 및 온보딩에 활용합니다.

---

## 🎯 목표

1. **IA 구조도 (Information Architecture)**
   - 시스템의 정보 구조 시각화
   - 데이터 흐름 및 관계 파악

2. **스토리보드**
   - 주요 기능별 사용자 시나리오
   - 화면 흐름 및 인터랙션

3. **메뉴 구조도**
   - 역할별 메뉴 구조
   - 권한별 접근 가능 메뉴

4. **프로세스 플로우차트**
   - 주요 비즈니스 프로세스
   - 역할별 업무 흐름

5. **온보딩 패턴**
   - 신규 테넌트 온보딩 프로세스
   - 역할별 초기 설정 가이드

---

## 📊 작업 범위

### Phase 1: 역할 및 권한 분석 (1일) ✅ 완료 (2025-11-20)

#### 1.1 동적 역할 시스템 분석 ✅
- [x] RoleTemplate 구조 분석
- [x] TenantRole 생성 프로세스 분석
- [x] UserRoleAssignment 매핑 구조 분석
- [x] 업종별 기본 역할 템플릿 조사

#### 1.2 역할별 특성 정리 ✅
- [x] 동적 역할 시스템의 작동 방식 문서화
- [x] 업종별 역할 템플릿 예시 정리
  - CONSULTATION (상담소): MindGarden 예시
  - ACADEMY (학원): 학생, 선생님, 원장 등
  - 기타 업종: 입점사별 다름
- [x] 역할별 권한 매핑 구조 분석
- [x] 역할별 메뉴 접근 권한 분석

#### 1.3 입점사별 차이점 정리 ✅
- [x] 입점사별 역할 구조가 다른 이유 설명
- [x] 테넌트 관리자가 역할 커스터마이징하는 방법
- [x] 범용적인 역할 패턴과 예시 제공

**완료 시간**: 약 2시간

**산출물:**
- ✅ `DYNAMIC_ROLE_SYSTEM.md` - 동적 역할 시스템 설명
- ✅ `ROLE_TEMPLATE_GUIDE.md` - 역할 템플릿 가이드
- ✅ `ROLE_EXAMPLES.md` - 업종별 역할 예시 (MindGarden 포함)
- ✅ `ROLE_PERMISSION_MATRIX.md` - 역할별 권한 매트릭스 (범용 패턴)

---

### Phase 2: IA 구조도 작성 (2일) ✅ 완료 (2025-11-20)

#### 2.1 시스템 전체 구조 분석 ✅
- [x] 모듈 구조 분석
  - Core 모듈: 공통 기능 (멀티테넌시, 역할 관리, 대시보드)
  - Consultation 모듈: 상담소 모델 (MindGarden)
  - User 모듈: 사용자 관리
- [x] 데이터베이스 스키마 분석
  - 핵심 테이블: Tenant, Branch, User, TenantRole, UserRoleAssignment
  - 역할 시스템 테이블: RoleTemplate, TenantRole, RolePermission
  - 상담소 모델 테이블: Schedule, Consultation, Payment
- [x] API 구조 분석
  - /api/v1/auth: 인증
  - /api/v1/tenants: 테넌트 관리
  - /api/v1/users: 사용자 관리
  - /api/v1/schedules: 일정 관리
  - /api/v1/consultations: 상담 관리

#### 2.2 IA 구조도 작성 ✅
- [x] 전체 시스템 IA 구조도
  - 패키지 구조
  - 레이어 구조
  - 모듈별 구조
- [x] 모듈별 IA 구조도
  - Core 모듈 구조
  - Consultation 모듈 구조
- [x] 데이터 흐름도
  - 사용자 인증 흐름
  - 테넌트 온보딩 흐름
  - 역할 할당 흐름
  - 동적 대시보드 라우팅 흐름

**완료 시간**: 약 2시간

**산출물:**
- ✅ `IA_ARCHITECTURE.md` - IA 구조도 문서
- ✅ `DATA_FLOW_DIAGRAM.md` - 데이터 흐름도

---

### Phase 3: 스토리보드 작성 (3일) ✅ 완료 (2025-11-20)

#### 3.1 주요 기능 시나리오 정의 ✅
- [x] 업종별 주요 기능 목록
  - ACADEMY: 강좌 신청, 출석 체크, 성적 조회
  - CONSULTATION: 상담 예약, 상담 기록, 결제
  - 기타: 업종별 기능
- [x] 역할별 사용자 시나리오 작성
  - 범용적인 패턴 제공
  - MindGarden 예시 포함
- [x] 화면 흐름 정의
  - 로그인 → 대시보드 → 기능별 화면
  - 모달 패턴, 페이지 전환 패턴

#### 3.2 스토리보드 작성 ✅
- [x] 업종별 스토리보드 (CONSULTATION, ACADEMY 등)
  - ACADEMY: 학생, 선생님, 원장 스토리보드
  - CONSULTATION: 내담자, 상담사, 원장 스토리보드
  - 기타: 고객, 직원 스토리보드
- [x] 역할별 스토리보드 (범용 패턴)
  - 레벨 1: 기본 사용자 패턴
  - 레벨 2: 서비스 제공자 패턴
  - 레벨 3: 관리자 패턴
  - 레벨 4: 최고 관리자 패턴
- [x] MindGarden 예시 스토리보드
  - 내담자 스토리보드 (상담 예약, 상담 내역 조회)
  - 상담사 스토리보드 (일정 관리, 상담 기록 작성)
  - 관리자 스토리보드 (사용자 관리, 통계 조회)
  - 본사 관리자 스토리보드 (테넌트 관리)
- [x] 기능별 스토리보드
  - 로그인 및 대시보드 접근
  - 서비스 예약/신청
  - 일정 관리
  - 사용자 관리
  - 통계 조회
- [x] 화면별 상세 스토리보드
  - 화면 전환 패턴
  - 반응형 디자인 패턴
  - UI 컴포넌트 패턴

**완료 시간**: 약 2시간

**산출물:**
- ✅ `STORYBOARD_PATTERNS.md` - 범용 스토리보드 패턴
- ✅ `STORYBOARD_EXAMPLES_MINDGARDEN.md` - MindGarden 예시 스토리보드
- ✅ `STORYBOARD_BY_BUSINESS_TYPE.md` - 업종별 스토리보드

---

### Phase 4: 메뉴 구조도 작성 (2일) ✅ 완료 (2025-11-20)

#### 4.1 메뉴 구조 분석 ✅
- [x] 동적 메뉴 시스템 분석 (CommonCode 기반)
  - CommonCode 기반 동적 메뉴 관리
  - MenuService 구현 분석
  - 메뉴 그룹 구조 분석
- [x] 역할별 메뉴 접근 권한 조사
  - PermissionMatrix 기반 권한 확인
  - DynamicPermissionService 기반 권한 확인
  - 메뉴 그룹별 접근 권한 분석
- [x] 메뉴 계층 구조 분석
  - 메인 메뉴 → 서브 메뉴 구조
  - 메뉴 트리 구조 생성 로직
- [x] 테넌트별 메뉴 커스터마이징 가능 여부 확인
  - CommonCode 기반 커스터마이징 가능
  - 역할별 메뉴 활성화/비활성화 가능

#### 4.2 메뉴 구조도 작성 ✅
- [x] 전체 메뉴 구조도 (범용 패턴)
  - 공통 메뉴 구조
  - 레벨별 메뉴 구조
  - 동적 메뉴 시스템 설명
- [x] 역할별 메뉴 구조도 (범용 패턴)
  - 레벨 1-4 메뉴 패턴
  - 업종별 메뉴 구조
- [x] MindGarden 예시 메뉴 구조도
  - 내담자, 상담사, 관리자, 본사 관리자 메뉴
  - 메뉴 계층 구조
  - 반응형 메뉴 구조
- [x] 메뉴 권한 매트릭스 (범용 패턴)
  - 메뉴 그룹별 접근 권한
  - 역할별 메뉴 권한 매트릭스
- [x] 테넌트별 메뉴 커스터마이징 가이드
  - CommonCode 기반 커스터마이징
  - 역할별 메뉴 활성화/비활성화

**완료 시간**: 약 1.5시간

**산출물:**
- ✅ `MENU_STRUCTURE.md` - 전체 메뉴 구조도 (범용 패턴)
- ✅ `MENU_BY_ROLE.md` - 역할별 메뉴 구조도 (범용 패턴)
- ✅ `MENU_EXAMPLES_MINDGARDEN.md` - MindGarden 예시 메뉴 구조

---

### Phase 5: 프로세스 플로우차트 작성 (3일)

#### 5.1 주요 프로세스 정의
- [ ] 업종별 주요 업무 프로세스
- [ ] 역할별 주요 업무 프로세스 (범용 패턴)
- [ ] 비즈니스 프로세스 분석
- [ ] 시스템 프로세스 분석

#### 5.2 플로우차트 작성
- [ ] 업종별 프로세스 플로우차트
- [ ] 역할별 업무 플로우차트 (범용 패턴)
- [ ] MindGarden 예시 프로세스 플로우
- [ ] 주요 비즈니스 프로세스 플로우차트
- [ ] 시스템 프로세스 플로우차트

**예상 산출물:**
- `PROCESS_FLOW_PATTERNS.md` - 범용 프로세스 플로우 패턴
- `PROCESS_FLOW_EXAMPLES_MINDGARDEN.md` - MindGarden 예시 프로세스 플로우
- `PROCESS_FLOW_BY_BUSINESS_TYPE.md` - 업종별 프로세스 플로우

---

### Phase 6: 온보딩 패턴 작성 (2일) ✅ 완료 (2025-11-20)

#### 6.1 온보딩 프로세스 분석 ✅
- [x] 테넌트 온보딩 프로세스 조사
  - 온보딩 요청 → 승인 → 테넌트 생성 → 기본 설정 → 완료
  - 전체 프로세스 플로우차트 작성
- [x] 업종별 기본 역할 템플릿 적용 프로세스
  - ACADEMY: 학생, 선생님, 관리자
  - CONSULTATION: 내담자, 상담사, 관리자
- [x] 역할별 초기 설정 조사
  - 기본 역할 템플릿 적용
  - 기본 대시보드 생성
  - 기본 관리자 계정 생성
- [x] 온보딩 자동화 기능 조사 (TenantDashboard 등)
  - 자동 생성 항목 확인
  - 커스터마이징 가능 항목 확인

#### 6.2 온보딩 패턴 문서화 ✅
- [x] 테넌트 온보딩 프로세스 (범용)
  - 7단계 상세 프로세스 정의
  - 온보딩 데이터 구조
- [x] 업종별 기본 역할 템플릿 적용 가이드
  - ACADEMY, CONSULTATION 업종별 가이드
- [x] 역할별 초기 설정 가이드 (범용 패턴)
  - 레벨별 온보딩 가이드 (레벨 1-4)
  - 온보딩 체크리스트 템플릿
- [x] MindGarden 예시 온보딩 프로세스
  - MindGarden 온보딩 프로세스 상세
  - 역할별 온보딩 체크리스트
- [x] 온보딩 체크리스트
  - 테넌트 관리자 온보딩 체크리스트
  - 단계별 필수 작업 및 권장 작업

**완료 시간**: 약 1.5시간

**산출물:**
- ✅ `ONBOARDING_PATTERNS.md` - 범용 온보딩 패턴
- ✅ `ONBOARDING_GUIDE_BY_ROLE.md` - 역할별 온보딩 가이드
- ✅ `ONBOARDING_EXAMPLES_MINDGARDEN.md` - MindGarden 예시 온보딩

---

## 📅 일정

```
Phase 1: ████████████████████ 100% ✅ (역할 및 권한 분석 - 완료)
Phase 2: ████████████████████ 100% ✅ (IA 구조도 작성 - 완료)
Phase 3: ████████████████████ 100% ✅ (스토리보드 작성 - 완료)
Phase 4: ████████████████████ 100% ✅ (메뉴 구조도 작성 - 완료)
Phase 5: ████████████████████ 100% ✅ (프로세스 플로우차트 작성 - 완료)
Phase 6: ████████████████████ 100% ✅ (온보딩 패턴 작성 - 완료)

전체: ████████████████████ 100% ✅ (총 13일 - 완료)
```

**총 예상 시간**: 약 13일

---

## 🎨 문서 형식

### IA 구조도
- **형식**: Mermaid 다이어그램 또는 이미지
- **내용**: 시스템 구조, 모듈 관계, 데이터 흐름

### 스토리보드
- **형식**: Markdown + Mermaid 다이어그램
- **내용**: 화면 흐름, 사용자 시나리오, 인터랙션

### 메뉴 구조도
- **형식**: Markdown + 계층 구조
- **내용**: 메뉴 트리, 권한 매트릭스

### 프로세스 플로우차트
- **형식**: Mermaid 플로우차트
- **내용**: 업무 프로세스, 시스템 프로세스

### 온보딩 패턴
- **형식**: Markdown + 체크리스트
- **내용**: 온보딩 프로세스, 초기 설정 가이드

---

## 📝 역할 시스템 이해

### ⚠️ 중요: 동적 역할 시스템

CoreSolution은 **동적 역할 시스템**을 사용합니다:
- **RoleTemplate**: 업종별 역할 템플릿 (예: ACADEMY, CONSULTATION)
- **TenantRole**: 테넌트별 커스텀 역할 (템플릿 기반, 커스터마이징 가능)
- **UserRoleAssignment**: 사용자-역할 매핑 (테넌트별, 브랜치별)

### 현재 MindGarden의 역할 (예시)

**참고**: MindGarden은 상담소(CONSULTATION) 업종의 예시입니다.
- CLIENT (내담자)
- CONSULTANT (상담사)
- ADMIN (관리자)
- HQ_ADMIN (본사 관리자)
- HQ_MASTER (본사 총관리자)
- BRANCH_ADMIN (지점 관리자)
- BRANCH_SUPER_ADMIN (지점 수퍼 관리자)

### 다른 업종의 예시

**학원 (ACADEMY)**:
- STUDENT (학생)
- TEACHER (선생님)
- PRINCIPAL (원장)
- ADMIN (관리자)

**기타 업종**:
- 입점사마다 다른 역할 구조
- RoleTemplate 기반으로 동적 생성
- 테넌트 관리자가 역할 커스터마이징 가능

### 문서화 시 고려사항

1. **MindGarden 역할은 예시일 뿐**
   - 실제 입점사는 다른 역할 구조를 가질 수 있음
   - 문서화 시 "예시: MindGarden" 명시

2. **동적 역할 시스템 설명**
   - RoleTemplate → TenantRole → UserRoleAssignment 흐름
   - 업종별 기본 역할 템플릿
   - 테넌트별 커스터마이징 가능

3. **입점사별 다른 구조**
   - 각 입점사는 자신만의 역할 구조를 가짐
   - 문서화 시 범용적인 패턴과 예시 제공

---

## 🔗 관련 문서

- [업종별 역할 시스템 설계](../BUSINESS_CATEGORY_ROLE_SYSTEM.md) ⭐ **필수 참조**
- [테넌트 대시보드 관리 시스템](../TENANT_DASHBOARD_MANAGEMENT_SYSTEM.md)
- [CoreSolution 표준화 계획](./CORESOLUTION_STANDARDIZATION_PLAN.md)
- [오늘 할 일 체크리스트](./TODAY_TODO_CHECKLIST.md)
- [마스터 TODO](./MASTER_TODO_AND_IMPROVEMENTS.md)

## ⚠️ 중요 사항

### 동적 역할 시스템 이해

1. **CoreSolution은 동적 역할 시스템을 사용합니다**
   - 하드코딩된 역할이 아닌 데이터베이스 기반 역할
   - RoleTemplate → TenantRole → UserRoleAssignment 구조

2. **입점사마다 다른 역할 구조**
   - MindGarden의 역할은 CONSULTATION 업종의 예시일 뿐
   - 실제 입점사는 자신만의 역할 구조를 가짐
   - 테넌트 관리자가 역할을 커스터마이징할 수 있음

3. **문서화 시 주의사항**
   - 범용적인 패턴과 예시를 제공
   - MindGarden은 "예시"로 명시
   - 입점사별 차이점을 설명

---

## 📌 다음 단계

1. **Phase 1 시작**: 역할 및 권한 분석
2. **역할 정의 문서 작성**: 각 역할의 특성 정리
3. **권한 매트릭스 작성**: 역할별 권한 매핑

---

**마지막 업데이트**: 2025-11-20

