# 🚀 MindGarden 운영 TODO

> **📅 최근 업데이트**: 2025-09-02  
> **🎯 현재 상태**: 핵심 기능 구현 완료, 상수 기반 아키텍처 구축  
> **📊 진행률**: 약 85% 완료

## ✅ 완료된 작업

### 🔧 백엔드 시스템
- [x] **Spring Boot 프로젝트 구조 설정**
- [x] **Hibernate JPA 엔티티 설계**
  - [x] User 엔티티 (기본 사용자)
  - [x] Client 엔티티 (내담자)
  - [x] Consultant 엔티티 (상담사)
  - [x] ConsultantClientMapping 엔티티 (매핑)
- [x] **OAuth2 소셜 로그인 구현**
  - [x] Kakao 로그인
  - [x] Naver 로그인
- [x] **JWT 인증 시스템**
- [x] **관리자 API 구현**
  - [x] 상담사 관리 API
  - [x] 내담자 관리 API
  - [x] 매핑 관리 API
  - [x] 사용자 역할 관리 API
- [x] **UserRole enum 구현**
  - [x] CLIENT, CONSULTANT, ADMIN, SUPER_ADMIN
  - [x] 역할 변경 기능
  - [x] 타입 안전성 보장
- [x] **결제 승인 및 세션 관리 시스템**
  - [x] PaymentStatus enum (PENDING, CONFIRMED, APPROVED, REJECTED, REFUNDED)
  - [x] ConsultantClientMapping에 결제 관련 필드 추가
  - [x] 세션 패키지 관리 (totalSessions, remainingSessions, usedSessions)
  - [x] 관리자 승인 워크플로우
- [x] **스케줄 관리 시스템**
  - [x] ConsultationType enum (상담 유형별 기본 시간 설정)
  - [x] Schedule 엔티티 및 Repository
  - [x] ScheduleService 및 ScheduleServiceImpl
  - [x] 시간 충돌 검사 및 10분 휴식 시간 적용
  - [x] 권한 기반 스케줄 조회 (상담사는 자신만, 관리자는 전체)
- [x] **상수 관리 시스템**
  - [x] ScheduleConstants 클래스 생성
  - [x] 하드코딩된 값들을 상수로 통합 관리
  - [x] 중복 변수 제거 및 유지보수성 향상
- [x] **스케줄 자동 완료 시스템**
  - [x] ScheduleAutoCompleteService 구현
  - [x] @Scheduled 어노테이션을 통한 백그라운드 작업
  - [x] 시간이 지난 확정된 스케줄 자동 완료 처리
  - [x] 매 10분마다 자동 실행
- [x] **개인정보 암호화/복호화 시스템**
  - [x] PersonalDataEncryptionUtil 구현
  - [x] AES/CBC/PKCS5Padding 암호화 알고리즘
  - [x] Base64 인코딩/디코딩
  - [x] UserService에서 자동 복호화 처리
  - [x] 암호화된 데이터와 일반 데이터 호환성 처리
- [x] **전화번호 암호화 마이그레이션 시스템** ✅
  - [x] PhoneMigrationService 구현
  - [x] PhoneMigrationController API 엔드포인트
  - [x] MigrationScript 자동 실행 시스템
  - [x] 기존 평문 전화번호 암호화 처리
  - [x] 마이그레이션 상태 확인 API
- [x] **자동 전화번호 암호화 로직** ✅
  - [x] 회원가입 시 전화번호 자동 암호화
  - [x] 관리자 내담자 등록 시 전화번호 암호화
  - [x] 관리자 상담사 등록 시 전화번호 암호화
  - [x] 개인정보보호법 준수 (전화번호 민감정보 암호화)
- [x] **실시간 통계 API**
  - [x] 오늘의 스케줄 통계 조회 API
  - [x] 상태별 스케줄 수 집계
  - [x] 관리자 권한 기반 통계 제공
- [x] **코드 관리 시스템 (Code Management)**
  - [x] Code 엔티티 및 Repository 구현
  - [x] CodeInitializationService로 기본 코드 값 초기화
  - [x] 상담 유형, 상태값, 스케줄 타입 등 코드화
  - [x] 한글 표시명 및 색상 코드 관리

### 🎨 프론트엔드 시스템
- [x] **React 프로젝트 구조 설정**
- [x] **관리자 대시보드 구현**
  - [x] 통계 카드 (상담사, 내담자, 매핑 수)
  - [x] 상담사 관리 컴포넌트
  - [x] 내담자 관리 컴포넌트
  - [x] 매핑 관리 컴포넌트
  - [x] 사용자 관리 컴포넌트
- [x] **기존 대시보드 디자인 패턴 적용**
  - [x] summary-panels 구조
  - [x] panel-header, panel-content 스타일
  - [x] 통일된 색상 및 레이아웃
- [x] **컴포넌트 분리 및 재사용성 향상**
- [x] **개발 모드 기능**
  - [x] 테스트 데이터 생성
  - [x] isDev 프로퍼티 활용
- [x] **FullCalendar 기반 스케줄 관리 시스템**
  - [x] 드래그 앤 드롭 스케줄 생성
  - [x] 상담사별 색상 구분
  - [x] 실시간 스케줄 업데이트
  - [x] 시간 충돌 검사
  - [x] 스케줄 취소 및 상태 변경
- [x] **코드 관리 시스템 (Code Management)**
  - [x] 데이터베이스 기반 코드 값 관리
  - [x] 상담 유형, 상태값, 스케줄 타입 한글화
  - [x] 관리자 화면에서 코드 값 관리
  - [x] 실시간 코드 값 업데이트
- [x] **스케줄 자동 완료 시스템**
  - [x] 예약 확정 후 시간 종료 시 자동 완료 처리
  - [x] Spring Scheduling을 통한 백그라운드 작업
  - [x] 매 10분마다 자동 실행
- [x] **개인정보 암호화/복호화 시스템**
  - [x] PersonalDataEncryptionUtil 구현
  - [x] 사용자 이름, 닉네임, 전화번호, 성별 암호화
  - [x] 프론트엔드에서 복호화된 데이터 표시
- [x] **전화번호 암호화 시스템** ✅
  - [x] 내담자 목록에서 암호화된 전화번호 복호화 표시
  - [x] 관리자 화면에서 전화번호 마스킹 처리
  - [x] 전화번호 없음 상태 처리 ("전화번호 없음" 표시)
  - [x] 개인정보보호법 준수 UI 구현
- [x] **실시간 통계 시스템**
  - [x] 오늘의 스케줄 통계 컴포넌트
  - [x] 30초마다 자동 새로고침
  - [x] 총 상담, 완료, 진행중, 취소 통계
- [x] **CSS 상수 관리 시스템**
  - [x] CSS 변수 및 디자인 토큰 상수화
  - [x] 컴포넌트별 CSS 클래스명 상수화
  - [x] 아이콘 상수 관리
  - [x] 색상, 간격, 폰트 크기 등 디자인 시스템 구축
- [x] **관리자 대시보드 재디자인**
  - [x] 카드 그룹화 (시스템 개요, 관리 기능, 시스템 도구)
  - [x] 불필요한 버튼 제거 및 UI 정리
  - [x] 반응형 디자인 개선
  - [x] 그라데이션 아이콘 및 호버 효과
- [x] **공통 헤더 및 햄버거 메뉴 시스템**
  - [x] TabletHeader, TabletHamburgerMenu 컴포넌트
  - [x] CSS 충돌 해결 및 상수 기반 클래스명 관리
  - [x] 역할별 메뉴 표시 (내담자, 상담사, 관리자)
  - [x] 프로필 정보 표시 및 마이페이지 링크
- [x] **내담자 대시보드 개선**
  - [x] 프로필 사진 및 사용자 이름 표시
  - [x] 마이페이지 링크 수정
  - [x] 웰컴 섹션에 프로필 정보 통합

### 🗄️ 데이터베이스
- [x] **MySQL 데이터베이스 설계**
- [x] **마이그레이션 스크립트 작성**
- [x] **인덱스 최적화**

### 📚 문서화
- [x] **API 문서 작성**
- [x] **시스템 설계 문서**
- [x] **개발 가이드 문서**

## 🔄 진행 중인 작업

### 🧪 테스트 및 검증
- [x] **결제 승인 및 세션 관리 시스템 테스트**
  - [x] 결제 승인 워크플로우 테스트
  - [x] 세션 사용 및 관리 테스트
  - [x] 관리자 승인 권한 검증
- [x] **스케줄 관리 시스템 테스트**
  - [x] 시간 충돌 검사 테스트
  - [x] 권한 기반 스케줄 조회 테스트
  - [x] 상담 유형별 시간 설정 테스트
- [x] **프론트엔드 컴포넌트 테스트**
  - [x] 각 관리 컴포넌트 동작 확인
  - [x] 에러 처리 검증
  - [x] 사용자 경험 개선
- [x] **CSS 상수 관리 시스템 테스트**
  - [x] CSS 변수 적용 테스트
  - [x] 컴포넌트별 클래스명 상수화 테스트
  - [x] 반응형 디자인 테스트
- [x] **개인정보 암호화/복호화 테스트**
  - [x] 암호화 알고리즘 검증
  - [x] 복호화 처리 테스트
  - [x] 기존 데이터 호환성 테스트
- [x] **전화번호 암호화 마이그레이션 테스트** ✅
  - [x] 마이그레이션 스크립트 실행 테스트
  - [x] 기존 평문 데이터 암호화 처리 검증
  - [x] 마이그레이션 상태 확인 API 테스트
  - [x] 자동 암호화 로직 검증 (회원가입, 관리자 등록)
  - [x] 개인정보보호법 준수 검증

## 📋 남은 작업

### 🔧 백엔드 개선
- [x] **UserService에 getAllUsers 메서드 추가**
- [x] **사용자 목록 조회 API 완성**
- [x] **역할 변경 권한 검증 강화**
- [x] **API 응답 형식 표준화**
- [x] **FullCalendar 통합**
  - [x] 스케줄 시각화 컴포넌트
  - [x] 드래그 앤 드롭 스케줄 관리
  - [x] 실시간 업데이트

### 🎨 프론트엔드 개선
- [x] **사용자 목록 표시 기능 완성**
- [x] **역할 변경 UI/UX 개선**
- [x] **실시간 데이터 업데이트**
- [x] **페이지네이션 구현**
- [x] **스케줄 관리 UI**
  - [x] FullCalendar 기반 스케줄 뷰
  - [x] 상담사별 스케줄 관리
  - [x] 결제 승인 상태 표시

### 🧪 테스트 및 배포
- [ ] **전체 시스템 통합 테스트**
- [ ] **성능 테스트**
- [ ] **보안 테스트**
- [ ] **배포 환경 구성**

### 🚀 추가 개선 사항
- [ ] **다국어 지원 시스템**
- [ ] **알림 시스템 개선**
- [ ] **백업 및 복구 시스템**
- [ ] **모니터링 및 로깅 시스템**
- [ ] **API 문서 자동화**

### 💳 결제 시스템 확장
- [ ] **PG사 연동 시스템**
  - [ ] **PG사 선택 및 계약**
    - [ ] KG이니시스, 토스페이먼츠, NHN KCP 등 PG사 비교 분석
    - [ ] 사업자등록증, 통신판매업 신고증 등 서류 준비
    - [ ] PG사 계약 및 API 키 발급
  - [ ] **실제 결제 API 연동**
    - [ ] PG사 API 연동 서비스 구현
    - [ ] 결제 승인/취소/환불 API 구현
    - [ ] 웹훅 처리 시스템 구현
  - [ ] **결제 보안 강화**
    - [ ] PCI DSS 준수
    - [ ] 결제 데이터 암호화
    - [ ] 결제 로그 및 감사 추적
  - [ ] **다양한 결제 수단 지원**
    - [ ] 신용카드 결제
    - [ ] 계좌이체
    - [ ] 간편결제 (카카오페이, 네이버페이, 토스)
    - [ ] 가상계좌 입금
  - [ ] **결제 관리 시스템**
    - [ ] 실시간 결제 내역 조회
    - [ ] 결제 통계 및 분석
    - [ ] 환불 처리 시스템
    - [ ] 정산 관리 시스템

## 🎯 다음 우선순위

1. **전체 시스템 통합 테스트** - 모든 기능의 통합 동작 검증
2. **성능 테스트** - 대용량 데이터 처리 및 응답 시간 최적화
3. **보안 테스트** - 개인정보 암호화 및 권한 검증 강화
4. **배포 환경 구성** - 프로덕션 환경 구축 및 배포 자동화
5. **모니터링 시스템 구축** - 시스템 상태 모니터링 및 알림 시스템

## 📝 참고사항

- **isDev 프로퍼티**: 개발 모드에서만 테스트 기능 활성화
- **UserRole enum**: 타입 안전성과 관리 편의성 향상
- **컴포넌트 분리**: 재사용성과 유지보수성 개선
- **기존 디자인 패턴**: 일관된 UI/UX 제공
- **PaymentStatus enum**: 결제 승인 워크플로우 관리
- **ConsultationType enum**: 상담 유형별 기본 시간 설정 (50분, 100분, 60분 등)
- **ScheduleConstants**: 스케줄 관련 상수 통합 관리, 중복 변수 제거
- **권한 기반 데이터 접근**: 상담사는 자신의 스케줄만, 관리자는 전체 스케줄 조회
- **CSS 상수 관리**: 모든 CSS 변수와 클래스명을 상수로 관리하여 일관성과 유지보수성 향상
- **개인정보 암호화**: AES 암호화를 통한 개인정보 보호 및 자동 복호화 처리
- **전화번호 암호화**: 개인정보보호법 준수를 위한 전화번호 민감정보 암호화 시스템
- **스케줄 자동 완료**: 백그라운드 스케줄러를 통한 자동 완료 처리
- **실시간 통계**: 30초마다 자동 새로고침되는 실시간 통계 시스템
- **코드 관리 시스템**: 데이터베이스 기반 코드 값 관리로 하드코딩 제거
- **FullCalendar 통합**: 드래그 앤 드롭 기반 직관적인 스케줄 관리
- **반응형 디자인**: 모바일/태블릿/데스크톱 모든 기기 지원
- **상수 기반 아키텍처**: 모든 변수와 값들을 상수로 관리하여 확장성과 유지보수성 극대화
