# MindGarden TODO 목록

## 🎯 최종 목표: 프랜차이즈 시스템 구축

**Vision**: MindGarden 상담 시스템을 프랜차이즈 모델로 확장하여 전국 여러 지점에서 운영할 수 있는 통합 관리 시스템 구축

---

## 📋 전체 TODO 현황

### ✅ 완료된 항목 (기반 시스템)
- [x] 수퍼어드민 역할 정의 및 권한 시스템 구현
- [x] 수퍼어드민 전용 메뉴 및 대시보드 구현
- [x] 수퍼어드민 전용 API 엔드포인트 구현
- [x] 수퍼어드민 권한 검증 로직 구현
- [x] 수퍼어드민 사용자 관리 기능 구현
- [x] 수퍼어드민 계정 생성 기능 구현
- [x] 수퍼어드민 자금관리 대시보드 인라인 스타일 적용
- [x] FinanceDashboard API 엔드포인트 수정 (403 오류 해결)
- [x] 상담사 전화번호 복호화 기능 구현
- [x] 어드민 대시보드 파스텔 톤 색상 변경 (그라데이션 제거)
- [x] 통계 대시보드 인라인 스타일 적용 및 아이콘 수정
- [x] 스케줄 등록 화면 CSS 충돌 해결 및 인라인 스타일 적용
- [x] 공통 LoadingSpinner 컴포넌트 구현 및 통일
- [x] ClientComprehensiveManagement 컴포넌트 인라인 스타일 적용
- [x] 내담자 관리 영어 상태 표시 한글화
- [x] 회원등급 아이콘 추가 (브론즈🥉, 실버🥈, 골드🥇, 플래티넘💎)
- [x] 내담자 총 상담 횟수 표시 오류 해결
- [x] API 엔드포인트 통일 및 오류 수정
- [x] 중복 로그인 방지 시스템 구현
- [x] 사용자 세션 관리 및 추적 시스템 구현
- [x] 중복 로그인 감지 및 알림 기능 구현
- [x] 세션 자동 정리 및 만료 관리 시스템 구현

### ❌ 취소된 항목
- [x] ~~수퍼어드민 계정 생성 페이지 구현~~ (불필요하여 취소)

### 🔄 진행 중인 항목
- 없음

### ⏳ 대기 중인 항목 (프랜차이즈화를 위한 단계별 개발)

#### 🏢 **1단계: 결제 및 재무 시스템** (우선순위: 높음)
- [ ] 결제 대행사 API 연동 (토스페이먼츠/아임포트)
- [ ] 결제 Webhook 엔드포인트 구현
- [ ] 실시간 결제 상태 확인 기능 구현
- [ ] 입금 확인 자동화 시스템 구현
- [ ] 수퍼어드민 재무 관리에 결제 확인 기능 추가
- [ ] 결제 실패/취소 처리 로직 구현
- [ ] 결제 내역 조회 및 통계 기능 구현
- [ ] 결제 보안 및 암호화 구현

#### 🏪 **2단계: 지점 관리 시스템** (우선순위: 높음)
- [ ] 지점(Branch) 엔티티 및 데이터베이스 설계
- [ ] 지점 등록/수정/삭제 기능 구현
- [ ] 지점별 상담사/내담자 관리 시스템
- [ ] 지점별 스케줄 및 예약 관리
- [ ] 지점별 통계 및 리포트 시스템
- [ ] 지점별 권한 관리 시스템

#### 👥 **3단계: 사용자 역할 확장** (우선순위: 중간)
- [ ] 지점장(BRANCH_MANAGER) 역할 추가
- [ ] 지점별 관리자 권한 시스템 구현
- [ ] 지점별 데이터 격리 및 보안 구현
- [ ] 지점 간 사용자 이동/이전 기능
- [ ] 지점별 설정 및 커스터마이징

#### 📊 **4단계: 통합 관리 시스템** (우선순위: 중간)
- [ ] 본사-지점 간 데이터 동기화
- [ ] 지점별 성과 모니터링 대시보드
- [ ] 지점별 수익/비용 관리 시스템
- [ ] 지점 간 상담사 공유 시스템
- [ ] 통합 고객 관리 시스템

#### 🔧 **5단계: 운영 자동화** (우선순위: 낮음)
- [ ] 지점별 자동 정산 시스템
- [ ] 지점별 인센티브 관리 시스템
- [ ] 지점별 마케팅 도구 제공
- [ ] 지점별 교육/훈련 관리 시스템
- [ ] 지점별 고객 만족도 조사 시스템

#### 🌐 **6단계: 확장성 및 성능** (우선순위: 낮음)
- [ ] 멀티 테넌트 아키텍처 구현
- [ ] 지점별 독립 데이터베이스 설계
- [ ] CDN 및 캐싱 시스템 구축
- [ ] API 레이트 리미팅 및 보안 강화
- [ ] 모니터링 및 알림 시스템 구축

---

## 🎯 상세 TODO 항목

### 💳 1단계: 결제 및 재무 시스템

**목표**: 프랜차이즈 운영을 위한 안정적인 결제 및 재무 관리 시스템 구축

#### 1. 결제 대행사 API 연동
- **상태**: 대기 중
- **우선순위**: 높음
- **설명**: 토스페이먼츠 또는 아임포트 API를 연동하여 결제 기능 구현
- **세부 작업**:
  - API 키 설정 및 환경변수 관리
  - 결제 요청/응답 처리 로직 구현
  - 에러 핸들링 및 재시도 로직 구현

#### 2. 결제 Webhook 엔드포인트 구현
- **상태**: 대기 중
- **우선순위**: 높음
- **설명**: 결제 대행사로부터 실시간 결제 상태 알림을 받는 Webhook 구현
- **세부 작업**:
  - Webhook 엔드포인트 생성 (`/api/payment/webhook`)
  - 서명 검증 로직 구현
  - 결제 상태 업데이트 로직 구현

#### 3. 실시간 결제 상태 확인 기능 구현
- **상태**: 대기 중
- **우선순위**: 중간
- **설명**: 결제 상태를 실시간으로 확인하고 업데이트하는 기능
- **세부 작업**:
  - 결제 상태 조회 API 구현
  - 프론트엔드 실시간 업데이트 구현
  - 상태 변경 알림 기능 구현

#### 4. 입금 확인 자동화 시스템 구현
- **상태**: 대기 중
- **우선순위**: 중간
- **설명**: 계좌이체 입금을 자동으로 확인하는 시스템
- **세부 작업**:
  - 은행 API 연동 (가능한 경우)
  - 입금 확인 로직 구현
  - 수동 확인 기능 구현

#### 5. 수퍼어드민 재무 관리에 결제 확인 기능 추가
- **상태**: 대기 중
- **우선순위**: 중간
- **설명**: 수퍼어드민 대시보드에 결제 확인 및 관리 기능 추가
- **세부 작업**:
  - 결제 내역 조회 UI 구현
  - 결제 상태 관리 기능 구현
  - 결제 통계 및 분석 기능 구현

#### 6. 결제 실패/취소 처리 로직 구현
- **상태**: 대기 중
- **우선순위**: 중간
- **설명**: 결제 실패나 취소 시 처리 로직 구현
- **세부 작업**:
  - 실패/취소 이벤트 처리
  - 환불 처리 로직 구현
  - 사용자 알림 기능 구현

#### 7. 결제 내역 조회 및 통계 기능 구현
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 결제 내역을 조회하고 통계를 제공하는 기능
- **세부 작업**:
  - 결제 내역 데이터베이스 설계
  - 조회 및 필터링 기능 구현
  - 통계 및 리포트 기능 구현

#### 8. 결제 보안 및 암호화 구현
- **상태**: 대기 중
- **우선순위**: 높음
- **설명**: 결제 정보 보안 및 암호화 처리
- **세부 작업**:
  - 결제 정보 암호화 저장
  - PCI DSS 준수 사항 검토
  - 보안 감사 및 테스트

---

### 🏪 2단계: 지점 관리 시스템

**목표**: 프랜차이즈 지점별 독립 운영 및 통합 관리 시스템 구축

#### 1. 지점(Branch) 엔티티 및 데이터베이스 설계
- **상태**: 대기 중
- **우선순위**: 높음
- **설명**: 지점 정보를 관리하는 데이터베이스 구조 설계
- **세부 작업**:
  - Branch 엔티티 설계 (지점명, 주소, 연락처, 상태 등)
  - 지점별 설정 테이블 설계
  - 지점별 권한 테이블 설계

#### 2. 지점 등록/수정/삭제 기능 구현
- **상태**: 대기 중
- **우선순위**: 높음
- **설명**: 수퍼어드민이 지점을 관리할 수 있는 기능
- **세부 작업**:
  - 지점 CRUD API 구현
  - 지점 등록/수정 폼 구현
  - 지점 상태 관리 (활성/비활성/폐점)

#### 3. 지점별 상담사/내담자 관리 시스템
- **상태**: 대기 중
- **우선순위**: 높음
- **설명**: 지점별로 상담사와 내담자를 독립적으로 관리
- **세부 작업**:
  - 지점별 상담사 할당 시스템
  - 지점별 내담자 관리 시스템
  - 지점 간 상담사 이동 기능

#### 4. 지점별 스케줄 및 예약 관리
- **상태**: 대기 중
- **우선순위**: 높음
- **설명**: 지점별로 독립적인 스케줄 관리
- **세부 작업**:
  - 지점별 스케줄 조회/관리
  - 지점별 예약 시스템
  - 지점 간 상담사 공유 스케줄

#### 5. 지점별 통계 및 리포트 시스템
- **상태**: 대기 중
- **우선순위**: 중간
- **설명**: 지점별 성과 및 통계 관리
- **세부 작업**:
  - 지점별 매출 통계
  - 지점별 상담 건수 통계
  - 지점별 고객 만족도 통계

#### 6. 지점별 권한 관리 시스템
- **상태**: 대기 중
- **우선순위**: 중간
- **설명**: 지점장과 지점 관리자 권한 시스템
- **세부 작업**:
  - 지점장(BRANCH_MANAGER) 역할 정의
  - 지점별 데이터 접근 권한 제어
  - 지점별 기능 제한 설정

---

### 👥 3단계: 사용자 역할 확장

**목표**: 프랜차이즈 운영을 위한 다양한 사용자 역할 및 권한 시스템 구축

#### 1. 지점장(BRANCH_MANAGER) 역할 추가
- **상태**: 대기 중
- **우선순위**: 중간
- **설명**: 지점을 관리하는 지점장 역할 추가
- **세부 작업**:
  - UserRole enum에 BRANCH_MANAGER 추가
  - 지점장 권한 정의 및 구현
  - 지점장 전용 대시보드 구현

#### 2. 지점별 관리자 권한 시스템 구현
- **상태**: 대기 중
- **우선순위**: 중간
- **설명**: 지점별로 다른 관리자 권한 설정
- **세부 작업**:
  - 지점별 권한 매트릭스 설계
  - 동적 권한 할당 시스템
  - 권한 변경 이력 관리

#### 3. 지점별 데이터 격리 및 보안 구현
- **상태**: 대기 중
- **우선순위**: 높음
- **설명**: 지점 간 데이터 격리 및 보안 강화
- **세부 작업**:
  - 지점별 데이터 필터링
  - 지점 간 데이터 접근 제한
  - 데이터 유출 방지 시스템

#### 4. 지점 간 사용자 이동/이전 기능
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 상담사나 내담자가 지점 간 이동할 수 있는 기능
- **세부 작업**:
  - 사용자 지점 변경 API
  - 지점 간 데이터 이전 로직
  - 이동 승인 워크플로우

#### 5. 지점별 설정 및 커스터마이징
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 지점별로 다른 설정 및 UI 커스터마이징
- **세부 작업**:
  - 지점별 테마 설정
  - 지점별 로고/브랜딩
  - 지점별 기능 활성화/비활성화

---

### 📊 4단계: 통합 관리 시스템

**목표**: 본사에서 모든 지점을 통합 관리할 수 있는 시스템 구축

#### 1. 본사-지점 간 데이터 동기화
- **상태**: 대기 중
- **우선순위**: 중간
- **설명**: 본사와 지점 간 실시간 데이터 동기화
- **세부 작업**:
  - 실시간 데이터 동기화 API
  - 충돌 해결 로직
  - 동기화 상태 모니터링

#### 2. 지점별 성과 모니터링 대시보드
- **상태**: 대기 중
- **우선순위**: 중간
- **설명**: 본사에서 모든 지점의 성과를 모니터링
- **세부 작업**:
  - 지점별 KPI 대시보드
  - 실시간 성과 알림
  - 성과 비교 분석

#### 3. 지점별 수익/비용 관리 시스템
- **상태**: 대기 중
- **우선순위**: 중간
- **설명**: 지점별 수익과 비용을 통합 관리
- **세부 작업**:
  - 지점별 매출 관리
  - 지점별 비용 관리
  - 수익성 분석 및 리포트

#### 4. 지점 간 상담사 공유 시스템
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 지점 간 상담사 공유 및 스케줄 관리
- **세부 작업**:
  - 상담사 공유 요청 시스템
  - 지점 간 스케줄 조율
  - 공유 상담사 관리

#### 5. 통합 고객 관리 시스템
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 모든 지점의 고객을 통합 관리
- **세부 작업**:
  - 통합 고객 데이터베이스
  - 고객 이력 추적
  - 고객 만족도 통합 관리

---

### 🔧 5단계: 운영 자동화

**목표**: 프랜차이즈 운영을 자동화하여 효율성 극대화

#### 1. 지점별 자동 정산 시스템
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 지점별 매출 자동 정산 및 지급
- **세부 작업**:
  - 자동 정산 로직 구현
  - 정산 리포트 생성
  - 지급 알림 시스템

#### 2. 지점별 인센티브 관리 시스템
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 지점별 성과에 따른 인센티브 자동 계산
- **세부 작업**:
  - 인센티브 계산 로직
  - 성과 기반 인센티브 지급
  - 인센티브 이력 관리

#### 3. 지점별 마케팅 도구 제공
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 지점별 마케팅을 위한 도구 제공
- **세부 작업**:
  - 마케팅 템플릿 제공
  - 고객 타겟팅 도구
  - 마케팅 성과 분석

#### 4. 지점별 교육/훈련 관리 시스템
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 지점 직원들의 교육 및 훈련 관리
- **세부 작업**:
  - 교육 과정 관리
  - 훈련 이수 추적
  - 자격증 관리

#### 5. 지점별 고객 만족도 조사 시스템
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 지점별 고객 만족도 자동 조사 및 분석
- **세부 작업**:
  - 자동 설문 조사 시스템
  - 만족도 분석 및 리포트
  - 개선사항 추천

---

### 🌐 6단계: 확장성 및 성능

**목표**: 대규모 프랜차이즈 운영을 위한 시스템 확장성 및 성능 최적화

#### 1. 멀티 테넌트 아키텍처 구현
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 지점별 독립적인 테넌트 환경 구축
- **세부 작업**:
  - 테넌트별 데이터 격리
  - 테넌트별 설정 관리
  - 테넌트별 리소스 할당

#### 2. 지점별 독립 데이터베이스 설계
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 지점별로 독립적인 데이터베이스 운영
- **세부 작업**:
  - 데이터베이스 분할 전략
  - 지점별 DB 마이그레이션
  - 데이터 백업 및 복구

#### 3. CDN 및 캐싱 시스템 구축
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 전국 지점의 빠른 서비스 제공
- **세부 작업**:
  - CDN 설정 및 최적화
  - 캐싱 전략 수립
  - 성능 모니터링

#### 4. API 레이트 리미팅 및 보안 강화
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 대규모 사용자를 위한 API 보안 및 성능 관리
- **세부 작업**:
  - API 레이트 리미팅 구현
  - DDoS 방어 시스템
  - 보안 모니터링

#### 5. 모니터링 및 알림 시스템 구축
- **상태**: 대기 중
- **우선순위**: 낮음
- **설명**: 전체 시스템 상태 모니터링 및 알림
- **세부 작업**:
  - 시스템 모니터링 대시보드
  - 장애 알림 시스템
  - 성능 분석 및 최적화

---

## 📊 진행률 통계

### 전체 진행률
- **전체 항목**: 38개
- **완료**: 24개 (63.2%)
- **취소**: 1개 (2.6%)
- **대기**: 13개 (34.2%)

### 단계별 진행률
- **1단계 (결제 및 재무)**: 0/8 (0%)
- **2단계 (지점 관리)**: 0/6 (0%)
- **3단계 (사용자 역할)**: 0/5 (0%)
- **4단계 (통합 관리)**: 0/5 (0%)
- **5단계 (운영 자동화)**: 0/5 (0%)
- **6단계 (확장성 및 성능)**: 0/5 (0%)

---

## 🚀 다음 단계

### 🎯 **즉시 시작 가능한 작업**
1. **1단계: 결제 및 재무 시스템 구축**
   - 결제 대행사 API 연동 (토스페이먼츠/아임포트)
   - 결제 Webhook 엔드포인트 구현
   - 수퍼어드민 재무 관리 기능 강화

### 📋 **단계별 개발 계획**
1. **Phase 1 (1-3개월)**: 결제 시스템 + 지점 관리 기반
   - 결제 및 재무 시스템 완성
   - 지점 엔티티 및 기본 관리 기능
   - 지점장 역할 추가

2. **Phase 2 (4-6개월)**: 통합 관리 시스템
   - 본사-지점 간 데이터 동기화
   - 지점별 성과 모니터링
   - 통합 고객 관리

3. **Phase 3 (7-12개월)**: 운영 자동화 및 확장
   - 자동 정산 및 인센티브 시스템
   - 마케팅 도구 및 교육 관리
   - 멀티 테넌트 아키텍처

### 🔧 **기술적 고려사항**
1. **결제 시스템**
   - PCI DSS 준수
   - 보안 및 암호화 강화
   - 실시간 모니터링

2. **지점 관리**
   - 데이터 격리 및 보안
   - 권한 관리 시스템
   - 성능 최적화

3. **확장성**
   - 마이크로서비스 아키텍처 고려
   - 데이터베이스 분할 전략
   - CDN 및 캐싱 시스템

---

## 📝 참고사항

- 모든 결제 관련 기능은 보안을 최우선으로 고려해야 함
- PCI DSS 준수 사항을 반드시 검토하고 준수해야 함
- 테스트 환경에서 충분한 검증 후 프로덕션 배포
- 사용자 개인정보보호법 및 관련 법규 준수

---

*마지막 업데이트: 2025-01-09*
