# 프로세스 플로우차트

**작성일**: 2025-11-21  
**버전**: 1.1.0  
**상태**: 업데이트 완료

---

## 📋 개요

CoreSolution 플랫폼의 주요 비즈니스 프로세스를 플로우차트로 정리한 문서입니다. 각 프로세스는 범용 패턴을 제공하며, 입점사별로 다른 프로세스를 가질 수 있습니다.

---

## 🔄 주요 프로세스 목록

### 핵심 프로세스

1. **사용자 인증 및 로그인**
2. **테넌트 온보딩**
3. **역할 할당**
4. **동적 대시보드 라우팅**
5. **권한 검증**
6. **서비스 예약/신청** (업종별)
7. **일정 관리**
8. **사용자 관리**
9. **통계 조회**
10. **공통 코드 관리** (입점사별 코드 관리)
11. **ERP 관리** (구매 요청, 예산 관리 등)

---

## 1. 사용자 인증 및 로그인 프로세스

### 범용 플로우차트

```mermaid
flowchart TD
    A[사용자 로그인 요청] --> B{인증 방식}
    B -->|ID/PW| C[ID/PW 검증]
    B -->|소셜 로그인| D[소셜 인증]
    C --> E{인증 성공?}
    D --> E
    E -->|실패| F[에러 메시지 표시]
    E -->|성공| G[사용자 정보 조회]
    G --> H[역할 정보 조회]
    H --> I{다중 테넌트?}
    I -->|예| J[테넌트 선택 화면]
    I -->|아니오| K[기본 테넌트 설정]
    J --> L[테넌트 선택]
    L --> K
    K --> M[현재 역할 설정]
    M --> N[대시보드 경로 결정]
    N --> O[대시보드로 리다이렉트]
    F --> A
```

### 프로세스 설명

1. **인증 요청**: 사용자가 ID/PW 또는 소셜 로그인 선택
2. **인증 처리**: 백엔드에서 인증 검증
3. **사용자 정보 조회**: 인증 성공 시 사용자 정보 조회
4. **역할 정보 조회**: 사용자의 역할 정보 조회
5. **테넌트 선택**: 다중 테넌트인 경우 테넌트 선택
6. **대시보드 라우팅**: 역할별 대시보드로 리다이렉트

---

## 2. 테넌트 온보딩 프로세스

### 범용 플로우차트

```mermaid
flowchart TD
    A[온보딩 요청] --> B[온보딩 정보 입력]
    B --> C[업종 선택]
    C --> D[기본 정보 입력]
    D --> E[이메일 인증]
    E --> F[결제 정보 입력]
    F --> G[온보딩 요청 제출]
    G --> H[본사 관리자 승인 대기]
    H --> I{승인 여부}
    I -->|거부| J[거부 사유 전달]
    I -->|승인| K[테넌트 생성]
    K --> L[기본 역할 템플릿 적용]
    L --> M[기본 대시보드 생성]
    M --> N[기본 컴포넌트 활성화]
    N --> O[기본 구독 생성]
    O --> P[온보딩 완료 알림]
    J --> A
    P --> Q[온보딩 상태 페이지에서 승인 확인]
    Q --> R[로그인 페이지로 이동]
    R --> S[이메일/비밀번호로 로그인]
    S --> T[로그인 성공]
    T --> U[테넌트 프로필 페이지로 리다이렉트]
    U --> V[테넌트 상태 확인]
    V --> W[구독 정보 확인]
    W --> X[결제 수단 확인/관리]
```

### 프로세스 설명

1. **온보딩 요청**: 입점사가 온보딩 요청
2. **정보 입력**: 업종, 기본 정보, 이메일 인증, 결제 정보 입력
3. **승인 대기**: 본사 관리자 승인 대기
4. **테넌트 생성**: 승인 시 테넌트 생성
5. **기본 설정**: 역할 템플릿, 대시보드, 컴포넌트, 구독 자동 설정
6. **완료 알림**: 온보딩 완료 알림 발송
7. **상태 확인**: 온보딩 상태 페이지에서 승인 완료 확인
8. **로그인**: 이메일과 비밀번호로 로그인
9. **프로필 페이지 이동**: 로그인 성공 시 테넌트 프로필 페이지로 자동 리다이렉트
10. **정보 확인**: 테넌트 상태, 구독 정보, 결제 수단 확인 및 관리

---

## 3. 역할 할당 프로세스

### 범용 플로우차트

```mermaid
flowchart TD
    A[사용자 역할 할당 요청] --> B[사용자 선택]
    B --> C[역할 선택]
    C --> D{역할 템플릿 사용?}
    D -->|예| E[역할 템플릿 선택]
    D -->|아니오| F[커스텀 역할 생성]
    E --> G[역할 정보 설정]
    F --> G
    G --> H[권한 설정]
    H --> I[지점 할당]
    I --> J[유효 기간 설정]
    J --> K[역할 할당 저장]
    K --> L[권한 적용]
    L --> M[알림 발송]
```

### 프로세스 설명

1. **사용자 선택**: 역할을 할당할 사용자 선택
2. **역할 선택**: 역할 템플릿 또는 커스텀 역할 선택
3. **권한 설정**: 역할에 대한 권한 설정
4. **지점 할당**: 지점별 역할 할당 (필요시)
5. **유효 기간 설정**: 역할 할당 유효 기간 설정
6. **저장 및 적용**: 역할 할당 저장 및 권한 적용

---

## 4. 동적 대시보드 라우팅 프로세스

### 범용 플로우차트

```mermaid
flowchart TD
    A[대시보드 접근 요청] --> B[사용자 정보 조회]
    B --> C[테넌트 ID 확인]
    C --> D[현재 역할 ID 확인]
    D --> E{대시보드 존재?}
    E -->|예| F[대시보드 정보 조회]
    E -->|아니오| G[기본 대시보드 사용]
    F --> H[대시보드 컴포넌트 결정]
    G --> H
    H --> I[대시보드 경로 생성]
    I --> J[대시보드 렌더링]
```

### 프로세스 설명

1. **사용자 정보 조회**: 현재 사용자 정보 조회
2. **테넌트/역할 확인**: 테넌트 ID와 역할 ID 확인
3. **대시보드 조회**: 역할별 대시보드 정보 조회
4. **컴포넌트 결정**: 대시보드 타입에 따른 컴포넌트 결정
5. **경로 생성**: 동적 경로 생성
6. **렌더링**: 대시보드 렌더링

---

## 5. 권한 검증 프로세스

### 범용 플로우차트

```mermaid
flowchart TD
    A[권한 검증 요청] --> B[사용자 정보 조회]
    B --> C[역할 정보 조회]
    C --> D[권한 정보 조회]
    D --> E{권한 타입}
    E -->|메뉴| F[메뉴 권한 확인]
    E -->|API| G[API 권한 확인]
    E -->|기능| H[기능 권한 확인]
    F --> I{권한 있음?}
    G --> I
    H --> I
    I -->|예| J[접근 허용]
    I -->|아니오| K[접근 거부]
    K --> L[에러 메시지 반환]
```

### 프로세스 설명

1. **권한 검증 요청**: 메뉴/API/기능 접근 시 권한 검증 요청
2. **사용자 정보 조회**: 현재 사용자 정보 조회
3. **역할 정보 조회**: 사용자의 역할 정보 조회
4. **권한 확인**: 권한 타입에 따른 권한 확인
5. **접근 허용/거부**: 권한이 있으면 허용, 없으면 거부

---

## 6. 서비스 예약/신청 프로세스 (범용)

### 범용 플로우차트

```mermaid
flowchart TD
    A[서비스 예약 요청] --> B[서비스 목록 조회]
    B --> C[서비스 선택]
    C --> D[일정 선택]
    D --> E{일정 가능?}
    E -->|아니오| F[다른 일정 선택]
    E -->|예| G[예약 정보 입력]
    F --> D
    G --> H[결제 필요?]
    H -->|예| I[결제 처리]
    H -->|아니오| J[예약 확인]
    I --> K{결제 성공?}
    K -->|실패| L[결제 실패 처리]
    K -->|성공| J
    J --> M[예약 저장]
    M --> N[알림 발송]
    L --> G
```

### 프로세스 설명

1. **서비스 목록 조회**: 예약 가능한 서비스 목록 조회
2. **서비스 선택**: 원하는 서비스 선택
3. **일정 선택**: 가능한 일정 선택
4. **예약 정보 입력**: 예약 정보 입력
5. **결제 처리**: 결제가 필요한 경우 결제 처리
6. **예약 저장**: 예약 정보 저장
7. **알림 발송**: 예약 확인 알림 발송

---

## 7. 일정 관리 프로세스

### 범용 플로우차트

```mermaid
flowchart TD
    A[일정 관리 요청] --> B{작업 타입}
    B -->|조회| C[일정 목록 조회]
    B -->|추가| D[일정 추가]
    B -->|수정| E[일정 수정]
    B -->|삭제| F[일정 삭제]
    C --> G[일정 목록 표시]
    D --> H[일정 정보 입력]
    H --> I[시간 충돌 검사]
    I --> J{충돌 있음?}
    J -->|예| K[에러 메시지]
    J -->|아니오| L[일정 저장]
    E --> M[일정 정보 수정]
    M --> I
    F --> N[일정 삭제 확인]
    N --> O{확인}
    O -->|예| P[일정 삭제]
    O -->|아니오| Q[취소]
    L --> R[알림 발송]
    P --> R
    K --> H
```

### 프로세스 설명

1. **작업 타입 선택**: 조회/추가/수정/삭제 선택
2. **일정 정보 입력**: 일정 정보 입력
3. **시간 충돌 검사**: 기존 일정과 시간 충돌 검사
4. **일정 저장/수정/삭제**: 일정 정보 저장/수정/삭제
5. **알림 발송**: 관련 사용자에게 알림 발송

---

## 8. 사용자 관리 프로세스

### 범용 플로우차트

```mermaid
flowchart TD
    A[사용자 관리 요청] --> B{작업 타입}
    B -->|조회| C[사용자 목록 조회]
    B -->|추가| D[사용자 추가]
    B -->|수정| E[사용자 수정]
    B -->|삭제| F[사용자 삭제]
    C --> G[사용자 목록 표시]
    D --> H[사용자 정보 입력]
    H --> I[역할 할당]
    I --> J[권한 설정]
    J --> K[지점 할당]
    K --> L[사용자 저장]
    E --> M[사용자 정보 수정]
    M --> I
    F --> N[사용자 삭제 확인]
    N --> O{확인}
    O -->|예| P[사용자 삭제]
    O -->|아니오| Q[취소]
    L --> R[알림 발송]
    P --> S[관련 데이터 정리]
```

### 프로세스 설명

1. **작업 타입 선택**: 조회/추가/수정/삭제 선택
2. **사용자 정보 입력**: 사용자 정보 입력
3. **역할 할당**: 사용자에게 역할 할당
4. **권한 설정**: 역할에 대한 권한 설정
5. **지점 할당**: 지점별 사용자 할당 (필요시)
6. **사용자 저장**: 사용자 정보 저장
7. **알림 발송**: 사용자에게 알림 발송

---

## 9. 통계 조회 프로세스

### 범용 플로우차트

```mermaid
flowchart TD
    A[통계 조회 요청] --> B[기간 선택]
    B --> C[통계 카테고리 선택]
    C --> D[권한 확인]
    D --> E{권한 있음?}
    E -->|아니오| F[접근 거부]
    E -->|예| G[통계 데이터 조회]
    G --> H[데이터 집계]
    H --> I[차트/그래프 생성]
    I --> J[통계 표시]
    J --> K{리포트 다운로드?}
    K -->|예| L[리포트 생성]
    K -->|아니오| M[완료]
    L --> N[리포트 다운로드]
    F --> M
```

### 프로세스 설명

1. **기간 선택**: 통계 조회 기간 선택
2. **카테고리 선택**: 통계 카테고리 선택
3. **권한 확인**: 통계 조회 권한 확인
4. **데이터 조회**: 통계 데이터 조회
5. **데이터 집계**: 데이터 집계 및 분석
6. **차트 생성**: 차트/그래프 생성
7. **리포트 다운로드**: 리포트 다운로드 (선택)

---

## 10. 공통 코드 관리 프로세스

### 코드 조회 프로세스

```mermaid
flowchart TD
    A[공통 코드 조회 요청] --> B[코드 그룹 선택]
    B --> C[코드 타입 필터]
    C --> D{코드 타입}
    D -->|CORE| E[CoreSolution 코드 조회]
    D -->|TENANT| F[입점사 코드 조회]
    E --> G[코드 목록 표시]
    F --> G
    G --> H[코드 상세 조회]
```

### 코드 추가 프로세스

```mermaid
flowchart TD
    A[공통 코드 관리 접근] --> B[코드 그룹 선택]
    B --> C[코드 타입 확인]
    C --> D{코드 타입}
    D -->|CORE| E[권한 확인]
    D -->|TENANT| F[입점사 코드 추가]
    E --> G{HQ Admin?}
    G -->|예| H[CoreSolution 코드 추가]
    G -->|아니오| I[접근 거부]
    F --> J[코드 정보 입력]
    H --> J
    J --> K[코드 값 입력]
    K --> L[코드 라벨 입력]
    L --> M[한글명 입력]
    M --> N[설명 입력]
    N --> O[정렬 순서 입력]
    O --> P[코드 저장]
    I --> Q[에러 메시지]
```

### 코드 수정/삭제 프로세스

```mermaid
flowchart TD
    A[공통 코드 관리 접근] --> B[코드 목록 조회]
    B --> C[코드 선택]
    C --> D[코드 타입 확인]
    D --> E{코드 타입}
    E -->|CORE| F[권한 확인]
    E -->|TENANT| G[입점사 코드 수정/삭제]
    F --> H{HQ Admin?}
    H -->|예| I[CoreSolution 코드 수정/삭제]
    H -->|아니오| J[접근 거부]
    G --> K{작업 타입}
    I --> K
    K -->|수정| L[코드 정보 수정]
    K -->|삭제| M[코드 삭제 확인]
    L --> N[코드 저장]
    M --> O{확인}
    O -->|예| P[코드 삭제]
    O -->|아니오| Q[취소]
    J --> R[에러 메시지]
```

### 프로세스 설명

1. **코드 조회**: 코드 그룹 및 코드 타입별 코드 조회
2. **코드 추가**: 입점사 코드 추가 (CoreSolution 코드는 HQ Admin만 추가 가능)
3. **코드 수정**: 입점사 코드 수정 (CoreSolution 코드는 HQ Admin만 수정 가능)
4. **코드 삭제**: 입점사 코드 삭제 (CoreSolution 코드는 HQ Admin만 삭제 가능)
5. **권한 확인**: 코드 타입별 권한 확인 (CORE: HQ Admin만, TENANT: Tenant Admin 가능)

---

## 11. ERP 관리 프로세스

### 구매 요청 프로세스

```mermaid
flowchart TD
    A[구매 요청 생성] --> B[아이템 선택]
    B --> C[수량 입력]
    C --> D[사유 입력]
    D --> E[구매 요청 제출]
    E --> F{관리자 승인}
    F -->|승인| G[구매 주문 생성]
    F -->|거부| H[구매 요청 거부]
    G --> I[구매 완료]
    H --> J[구매 요청 취소]
```

### 프로세스 설명

1. **구매 요청 생성**: 구매 요청 생성
2. **아이템 선택**: 구매할 아이템 선택
3. **수량 입력**: 구매 수량 입력
4. **사유 입력**: 구매 사유 입력
5. **구매 요청 제출**: 구매 요청 제출
6. **관리자 승인**: 관리자 승인 처리
7. **구매 주문 생성**: 승인 시 구매 주문 생성
8. **구매 완료**: 구매 완료 처리

### 예산 관리 프로세스

```mermaid
flowchart TD
    A[예산 관리 접근] --> B[예산 목록 조회]
    B --> C{작업 타입}
    C -->|추가| D[예산 추가]
    C -->|수정| E[예산 수정]
    C -->|조회| F[예산 상세 조회]
    D --> G[예산 항목 입력]
    E --> G
    G --> H[예산 금액 입력]
    H --> I[예산 기간 설정]
    I --> J[예산 저장]
    J --> K[예산 사용/환불 처리]
    K --> L[예산 통계 조회]
```

### 프로세스 설명

1. **예산 목록 조회**: 예산 목록 조회
2. **예산 추가/수정**: 예산 추가 또는 수정
3. **예산 정보 입력**: 예산 항목, 금액, 기간 입력
4. **예산 저장**: 예산 정보 저장
5. **예산 사용/환불**: 예산 사용 또는 환불 처리
6. **예산 통계 조회**: 예산 통계 조회

---

## 🔗 관련 문서

- [역할별 플로우차트](./PROCESS_FLOWCHARTS_BY_ROLE.md)
- [MindGarden 예시 플로우차트](./PROCESS_FLOWCHARTS_EXAMPLES_MINDGARDEN.md)
- [데이터 흐름도](./DATA_FLOW_DIAGRAM.md)

---

**마지막 업데이트**: 2025-11-21

## 📝 변경 이력

### v1.1.0 (2025-11-21)
- 테넌트 온보딩 프로세스 업데이트
  - 이메일 인증 단계 추가
  - 온보딩 완료 후 로그인 플로우 추가
  - 로그인 성공 시 테넌트 프로필 페이지로 자동 리다이렉트 추가
  - 테넌트 프로필 페이지에서 상태, 구독, 결제 수단 확인 및 관리 플로우 추가

