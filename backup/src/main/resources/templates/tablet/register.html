<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>MindGarden - 테블릿 회원가입</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 공통 CSS -->
    <link rel="stylesheet" th:href="@{/css/variables.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/components.css}">
    <link rel="stylesheet" th:href="@{/css/tablet.css}">
    <link rel="stylesheet" th:href="@{/css/tablet-common.css}">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    
    <!-- 공통 JavaScript -->
    <script th:src="@{/js/common/utils.js}"></script>
    <script th:src="@{/js/common/ajax.js}"></script>
    <script th:src="@{/js/common/router.js}"></script>
    <script th:src="@{/js/common/components.js}"></script>
    <script th:src="@{/js/tablet/tablet.js}"></script>
</head>
<body class="tablet-register-page tablet-page" style="display: flex; flex-direction: column; min-height: 100vh; min-width: 768px; max-width: 1024px; margin: 0 auto;">
    
    <!-- 테블릿 햄버거 메뉴 네비게이션 -->
    <div th:replace="~{common/components/tablet-navigation :: tablet-header}">
        <!-- 햄버거 메뉴 헤더 -->
    </div>
    
    <!-- 메인 컨텐츠 -->
    <main class="tablet-main">
        <div class="tablet-container">
            <div class="register-container">
                <!-- 회원가입 폼 섹션 -->
                <div class="register-form-section">
                    <div class="form-container">
                        <h2 class="form-title">회원가입</h2>
                        <p class="form-subtitle">새로운 계정을 만들어 서비스를 이용하세요</p>
                        
                        <form id="registerForm" class="register-form" th:action="@{/api/auth/register}" method="post">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="name" class="form-label">이름 *</label>
                                    <div class="input-wrapper">
                                        <div class="input-icon">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <path d="M10 10C12.7614 10 15 7.76142 15 5C15 2.23858 12.7614 0 10 0C7.23858 0 5 2.23858 5 5C5 7.76142 7.23858 10 10 10Z" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                                <path d="M20 20C20 15.5817 15.5228 12 10 12C4.47715 12 0 15.5817 0 20" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                            </svg>
                                        </div>
                                        <input type="text" id="name" name="name" class="form-input" placeholder="이름을 입력하세요" required>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="nickname" class="form-label">닉네임</label>
                                    <div class="input-wrapper">
                                        <div class="input-icon">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <path d="M10 10C12.7614 10 15 7.76142 15 5C15 2.23858 12.7614 0 10 0C7.23858 0 5 2.23858 5 5C5 7.76142 7.23858 10 10 10Z" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                                <path d="M20 20C20 15.5817 15.5228 12 10 12C4.47715 12 0 15.5817 0 20" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                            </svg>
                                        </div>
                                        <input type="text" id="nickname" name="nickname" class="form-input" placeholder="닉네임을 입력하세요">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="email" class="form-label">이메일 *</label>
                                <div class="input-wrapper">
                                    <div class="input-icon">
                                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                            <path d="M2.5 5.83333C2.5 4.91286 3.24619 4.16667 4.16667 4.16667H15.8333C16.7538 4.16667 17.5 4.91286 17.5 5.83333V14.1667C17.5 15.0871 16.7538 15.8333 15.8333 15.8333H4.16667C3.24619 15.8333 2.5 15.0871 2.5 14.1667V5.83333Z" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                            <path d="M17.5 5.83333L10 10.8333L2.5 5.83333" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                        </svg>
                                    </div>
                                    <input type="email" id="email" name="email" class="form-input" placeholder="이메일을 입력하세요" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="password" class="form-label">비밀번호 *</label>
                                    <div class="input-wrapper">
                                        <div class="input-icon">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <path d="M15 8.33333V6.66667C15 4.08934 12.9107 2 10.3333 2C7.756 2 5.66667 4.08934 5.66667 6.66667V8.33333" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                                <rect x="3.33333" y="8.33333" width="14" height="9.66667" rx="1" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                                <circle cx="10" cy="13" r="1" fill="var(--secondary-400)"/>
                                            </svg>
                                        </div>
                                        <input type="password" id="password" name="password" class="form-input" placeholder="8자 이상 입력하세요" required minlength="8">
                                        <button type="button" class="password-toggle" onclick="togglePassword('password')">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <path d="M10 4.16667C6.25 4.16667 3.33333 6.66667 2.5 10C3.33333 13.3333 6.25 15.8333 10 15.8333C13.75 15.8333 16.6667 13.3333 17.5 10C16.6667 6.66667 13.75 4.16667 10 4.16667Z" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                                <circle cx="10" cy="10" r="2.5" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="confirmPassword" class="form-label">비밀번호 확인 *</label>
                                    <div class="input-wrapper">
                                        <div class="input-icon">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <path d="M15 8.33333V6.66667C15 4.08934 12.9107 2 10.3333 2C7.756 2 5.66667 4.08934 5.66667 6.66667V8.33333" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                                <rect x="3.33333" y="8.33333" width="14" height="9.66667" rx="1" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                                <circle cx="10" cy="13" r="1" fill="var(--secondary-400)"/>
                                            </svg>
                                        </div>
                                        <input type="password" id="confirmPassword" name="confirmPassword" class="form-input" placeholder="비밀번호를 다시 입력하세요" required minlength="8">
                                        <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword')">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <path d="M10 4.16667C6.25 4.16667 3.33333 6.66667 2.5 10C3.33333 13.3333 6.25 15.8333 10 15.8333C13.75 15.8333 16.6667 13.3333 17.5 10C16.6667 6.66667 13.75 4.16667 10 4.16667Z" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                                <circle cx="10" cy="10" r="2.5" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="phone" class="form-label">휴대폰 번호 *</label>
                                    <div class="input-wrapper">
                                        <div class="input-icon">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <path d="M15 2.5H5C4.11929 2.5 3.5 3.11929 3.5 4V16C3.5 16.8807 4.11929 17.5 5 17.5H15C15.8807 17.5 16.5 16.8807 16.5 16V4C16.5 3.11929 15.8807 2.5 15 2.5Z" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                                <path d="M12.5 15C12.5 15.2761 12.2761 15.5 12 15.5C11.7239 15.5 11.5 15.2761 11.5 15C11.5 14.7239 11.7239 14.5 12 14.5C12.2761 14.5 12.5 14.7239 12.5 15Z" fill="var(--secondary-400)"/>
                                            </svg>
                                        </div>
                                        <input type="tel" id="phone" name="phone" class="form-input" placeholder="010-0000-0000" required maxlength="13">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="gender" class="form-label">성별</label>
                                    <div class="input-wrapper">
                                        <div class="input-icon">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <path d="M10 10C12.7614 10 15 7.76142 15 5C15 2.23858 12.7614 0 10 0C7.23858 0 5 2.23858 5 5C5 7.76142 7.23858 10 10 10Z" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                                <path d="M20 20C20 15.5817 15.5228 12 10 12C4.47715 12 0 15.5817 0 20" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                            </svg>
                                        </div>
                                        <select id="gender" name="gender" class="form-select">
                                            <option value="">성별을 선택하세요</option>
                                            <option value="MALE">남성</option>
                                            <option value="FEMALE">여성</option>
                                            <option value="OTHER">기타</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="birthDate" class="form-label">생년월일</label>
                                <div class="input-wrapper">
                                    <div class="input-icon">
                                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                            <path d="M6.5 2.5H13.5M6.5 2.5V1.25C6.5 0.559644 7.05964 0 7.75 0C8.44036 0 9 0.559644 9 1.25V2.5M6.5 2.5H5C4.11929 2.5 3.5 3.11929 3.5 4V17C3.5 17.8807 4.11929 18.5 5 18.5H15C15.8807 18.5 16.5 17.8807 16.5 17V4C16.5 3.11929 15.8807 2.5 15 2.5H13.5M9 2.5V1.25C9 0.559644 9.55964 0 10.25 0C10.9404 0 11.5 0.559644 11.5 1.25V2.5M9 2.5H11.5" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                            <path d="M3.5 7H16.5" stroke="var(--secondary-400)" stroke-width="1.5"/>
                                        </svg>
                                    </div>
                                    <input type="date" id="birthDate" name="birthDate" class="form-input">
                                </div>
                            </div>
                            
                            <div class="form-options">
                                <label class="checkbox-wrapper">
                                    <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
                                    <span class="checkmark"></span>
                                    <a href="#" class="link">이용약관</a>에 동의합니다
                                </label>
                                <label class="checkbox-wrapper">
                                    <input type="checkbox" id="agreePrivacy" name="agreePrivacy" required>
                                    <span class="checkmark"></span>
                                    <a href="#" class="link">개인정보처리방침</a>에 동의합니다
                                </label>
                            </div>
                            
                            <button type="submit" class="register-button">
                                <span class="button-text">회원가입</span>
                                <div class="button-icon">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                        <path d="M3.33333 10H16.6667M16.6667 10L11.6667 5M16.6667 10L11.6667 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                            </button>
                        </form>
                        
                        <div class="divider">
                            <span>또는</span>
                        </div>
                        
                        <div class="social-signup">
                            <button class="social-button kakao" onclick="kakaoLogin()">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2Z" fill="#FEE500"/>
                                    <path d="M10 6C7.79086 6 6 7.79086 6 10C6 12.2091 7.79086 14 10 14C12.2091 14 14 12.2091 14 10C14 7.79086 12.2091 6 10 6Z" fill="#FEE500"/>
                                </svg>
                                카카오로 회원가입
                            </button>
                            
                            <button class="social-button naver" onclick="naverLogin()">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <rect width="20" height="20" rx="2" fill="#03C75A"/>
                                    <path d="M6 6L14 14M14 6L6 14" stroke="white" stroke-width="2"/>
                                </svg>
                                네이버로 회원가입
                            </button>
                        </div>
                        
                        <div class="login-link">
                            <p>이미 계정이 있으신가요? <a href="/tablet/login" class="link">로그인</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- 공통 모달 컴포넌트들 -->
    <div th:replace="~{common/components/social-signup-modal :: social-signup-modal}">
        <!-- 소셜 회원가입 모달 -->
    </div>
    
    <div th:replace="~{common/components/notification :: notification}">
        <!-- 알림 컴포넌트 -->
    </div>
    
    <script>
    // 비밀번호 표시/숨김 토글
    function togglePassword(fieldId) {
        const passwordInput = document.getElementById(fieldId);
        const passwordToggle = passwordInput.nextElementSibling;
        
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            passwordToggle.innerHTML = `
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M2.5 5.83333C2.5 4.91286 3.24619 4.16667 4.16667 4.16667H15.8333C16.7538 4.16667 17.5 4.91286 17.5 5.83333V14.1667C17.5 15.0871 16.7538 15.8333 15.8333 15.8333H4.16667C3.24619 15.8333 2.5 15.0871 2.5 14.1667V5.83333Z" stroke="var(--secondary-400)" stroke-width="1.5"/>
                    <path d="M17.5 5.83333L10 10.8333L2.5 5.83333" stroke="var(--secondary-400)" stroke-width="1.5"/>
                </svg>
            `;
        } else {
            passwordInput.type = 'password';
            passwordToggle.innerHTML = `
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M10 4.16667C6.25 4.16667 3.33333 6.66667 2.5 10C3.33333 13.3333 6.25 15.8333 10 15.8333C13.75 15.8333 16.6667 13.3333 17.5 10C16.6667 6.66667 13.75 4.16667 10 4.16667Z" stroke="var(--secondary-400)" stroke-width="1.5"/>
                    <circle cx="10" cy="10" r="2.5" stroke="var(--secondary-400)" stroke-width="1.5"/>
                </svg>
            `;
        }
    }
    
    // OAuth2 설정 가져오기
    async function getOAuth2Config() {
        try {
            const response = await fetch('/api/auth/oauth2/config');
            if (response.ok) {
                const config = await response.json();
                window.oauth2Config = config;
            }
        } catch (error) {
            console.error('OAuth2 설정을 가져오는데 실패했습니다:', error);
        }
    }
    
    // 카카오 로그인
    async function kakaoLogin() {
        if (!window.oauth2Config?.kakao?.clientId) {
            console.error('카카오 OAuth2 설정이 없습니다.');
            return;
        }
        
        const clientId = window.oauth2Config.kakao.clientId;
        const redirectUri = encodeURIComponent(window.oauth2Config.kakao.redirectUri);
        const scope = window.oauth2Config.kakao.scope;
        
        const kakaoAuthUrl = `https://kauth.kakao.com/oauth/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=code&scope=${scope}`;
        
        window.location.href = kakaoAuthUrl;
    }
    
    // 네이버 로그인
    async function naverLogin() {
        if (!window.oauth2Config?.naver?.clientId) {
            console.error('네이버 OAuth2 설정이 없습니다.');
            return;
        }
        
        const clientId = window.oauth2Config.naver.clientId;
        const redirectUri = encodeURIComponent(window.oauth2Config.naver.redirectUri);
        const state = Math.random().toString(36).substring(2, 15);
        
        // state를 세션에 저장 (보안을 위해)
        sessionStorage.setItem('naver_oauth_state', state);
        
        const naverAuthUrl = `https://nid.naver.com/oauth2.0/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=code&state=${state}`;
        
        window.location.href = naverAuthUrl;
    }
    
    // 페이지 로드 시 OAuth2 설정 가져오기
    document.addEventListener('DOMContentLoaded', function() {
        getOAuth2Config();
    });
    </script>
</body>
</html>
