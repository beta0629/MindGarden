# 🚀 운영 환경 배포 체크리스트

## 📋 **배포 전 체크리스트**

### **1. 코드 변경사항**
- [x] Entity에 `depositConfirmed` 필드 추가
- [x] Entity에 `DEPOSIT_CONFIRMED` enum 값 추가  
- [x] `confirmDeposit` 메서드 수정 (별도 트랜잭션 처리)
- [x] `MappingCard`에 "최종 승인" 버튼 추가
- [x] 프론트엔드 ERP 연동 배지 로직 수정

### **2. 데이터베이스 마이그레이션**
- [x] 마이그레이션 스크립트 작성: `2025-10-17_add_deposit_confirmed_status.sql`
- [ ] **운영 DB 백업** (배포 전 필수!)
- [ ] 마이그레이션 스크립트 실행
- [ ] 데이터 무결성 검증

### **3. 테스트 검증**
- [ ] 로컬에서 전체 플로우 테스트 완료
- [ ] 스테이징 환경에서 테스트
- [ ] 기존 데이터 영향도 확인

### **4. 운영 배포 순서**
1. **운영 DB 백업** 📦
2. **마이그레이션 실행** 🔄
3. **애플리케이션 배포** 🚀
4. **기능 테스트** ✅
5. **모니터링** 📊

## ⚠️ **주의사항**

### **기존 데이터 처리**
- 현재 `ACTIVE` 상태인 매핑들은 그대로 유지
- 새로운 매핑만 `PENDING_PAYMENT` → `PAYMENT_CONFIRMED` → `DEPOSIT_CONFIRMED` → `ACTIVE` 플로우 적용

### **롤백 계획**
- 마이그레이션 스크립트에 롤백 코드 포함
- 백업 테이블 자동 생성
- 문제 발생 시 즉시 롤백 가능

## 📊 **배포 후 모니터링**

### **확인 항목**
- [ ] 입금 확인 기능 정상 작동
- [ ] ERP 연동 배지 표시
- [ ] 최종 승인 기능 작동
- [ ] 기존 데이터 영향 없음
- [ ] 성능 저하 없음

### **모니터링 지표**
- 입금 확인 API 응답 시간
- ERP 연동 성공률
- 에러 로그 모니터링
- 데이터베이스 성능

## 🎯 **성공 기준**
1. ✅ 입금 확인 버튼 클릭 시 `DEPOSIT_CONFIRMED` 상태로 변경
2. ✅ ERP 연동 배지 표시
3. ✅ 최종 승인 버튼으로 `ACTIVE` 상태 변경
4. ✅ 기존 기능 영향 없음
5. ✅ 성능 저하 없음
