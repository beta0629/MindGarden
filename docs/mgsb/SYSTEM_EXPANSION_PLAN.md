# MindGarden 2.0: 소상공인 플랫폼 확장 계획

## 1. 비전 및 목표 (Vision & Goals)

- **타겟 고객:** 대한민국 내 소규모 자영업자 (태권도장, 각종 학원, 배달외식 업체, POS가 없는 서비스 업종 등)
- **핵심 가치 제안:** 복잡한 자체 시스템 없이 회원, 주문, 결제를 한 번에 관리할 수 있는 올인원(All-in-One) 솔루션 제공
- **주요 기능 방향:**
  - 다중 사업장 지원 (Multi-Tenancy)
  - 고객 관계 관리 (CRM)
  - 주문·예약·수강 관리
  - 중앙화된 결제·정산 (기존 ERP 시스템 확장)
  - 소비자/관리자 포털을 동일 플랫폼 내에서 운영

## 2. 기존 MindGarden 시스템 분석 (Current System Assessment)

- **아키텍처 개요:** Spring Boot 기반 백엔드 + React 프론트엔드(디자인 시스템
  v2.0 적용), ERP 모듈 중심의 상담 센터 프랜차이즈 모델(Branch 단위 사업장 관리)
- **주요 제공 기능:**
  - 상담 일정 관리 및 승인 흐름
  - ERP 기반 결제·정산·통계 기능
  - 공통 알림/푸시 시스템 (NotificationContext 연동)
  - 모바일 앱 세션/로그인 관리 (SessionManager, AsyncStorage 등)
  - 디자인 시스템 v2.0 (공통 UI 컴포넌트, CSS 변수 체계)
- **식별된 문제/기술 부채:**
  - 모바일 앱의 오래된 `JSESSIONID` 유지로 인한 인증 오류(403)
  - 공개 페이지(`/register`, `/forgot-password`)의 CSS 하드코딩/반응형 부족
  - `/api/auth/register` 미구현으로 인한 404, 401 오류 및 공용 알림 API 호출 이슈
  - 브랜치 코드 처리 로직의 일관성 부족 (소셜 회원가입 포함)
- **재사용·확장 기회:**
  - Branch/ERP 도메인 모델을 멀티테넌시 기본 틀로 전환 가능
  - 디자인 시스템 v2.0, NotificationContext, 결제/정산 모듈을 확장 플랫폼 코어로 재활용
  - SessionManager, SecurityConfig 개선 경험을 확장 아키텍처 보안 표준으로 활용

## 3. 제안 아키텍처 (Proposed Architecture)

- **멀티테넌시 전략:** 기존 Branch 구조를 기반으로 테넌트 식별자(Tenant ID)를
  도입하고, 공유 DB 내 테넌트 필드 분리 또는 스키마 분리를 검토
- **모듈형 서비스 설계:**
  - `코어 서비스(Core Services)`: 인증, 테넌트/사용자 관리, ERP 결제·정산,
    알림/푸시, 설정 관리
  - `업종별 모듈(Business Modules)`: 업종 특화 로직을 플러그인 형태로 확장
    (예: `Academy Module`, `Food Service Module`)
- **API 우선 접근:** REST/GraphQL API 레이어를 중심으로 웹 대시보드, 소비자 웹·모바일 앱, 파트너 시스템 연동을 지원

## 4. 데이터 모델 및 도메인 설계 (초안)

- `Tenant/Business`: 등록된 소상공인 사업장 (기존 Branch 모델 확장)
- `Branch/Outlet`: 다지점 사업장 지원 시 하위 조직 단위
- `Staff/Admin`: 각 테넌트·지점 관리 권한을 가진 내부 사용자
- `Customer`: 특정 테넌트에 소속된 외부 고객/회원
- `Product/Service`: 수강권, 메뉴 등 테넌트가 제공하는 상품/서비스
- `Order/Reservation`: 주문, 예약, 수강 신청 등 거래 정보
- `Payment/Settlement`: 중앙 ERP와 연계된 결제 및 정산 데이터

## 5. 이중 포털 경험 설계 (Dual Portal Experience)

- **소비자 포털:**
  - 서비스/상품 탐색, 예약·주문, 회원가입/로그인, 결제, 주문 내역 조회
  - 반응형 웹 및 향후 모바일 앱 연계 고려
- **관리자 포털:**
  - 테넌트 등록·설정, 직원/권한 관리
  - 회원·주문·결제 현황 대시보드, 재고/수강 관리, 프로모션·알림 설정
  - ERP 기반 공통 정산 뷰 및 분석 리포트 제공
- **공통 UX 고려:** 동일 플랫폼 내에서 브랜드 일관성 유지, 역할 기반 라우팅·권한 관리

## 6. 중앙화 데이터 코어 및 성능 전략

- **PL/SQL 기반 데이터 처리 최적화:** 고부하 집계·정산 작업을 데이터베이스
  레벨(Package/Procedure)에서 수행하여 처리 속도를 높이고 API 서버 부하를 경감
- **코드 테이블 한국어 필드 일관성:** 공통 코드 테이블에 코드 값과 함께 한글
  필드를 기본으로 포함하여 다국어/로컬라이제이션 요구 사항을 충족
- **데이터 일관성 관리:** ERP와 통합된 트랜잭션 처리 시점을 표준화하고,
  PL/SQL 작업과 애플리케이션 레이어 간의 데이터 동기 전략을 수립

## 7. 단계별 실행 로드맵 (MVP 우선)

- **1단계: 기반 구축 및 MVP (타겟: 학원)**
  - 테넌트 온보딩 및 Branch 구조 정비, 역할·권한 관리 강화
  - 학원용 CRM(회원 등록, 출결, 수강료 청구) 및 소비자 예약·결제 흐름 구현
  - 관리자/소비자 포털의 핵심 화면 제공 및 기존 ERP 결제 연동
- **2단계: 기능 확장 (타겟: 소규모 요식업)**
  - 메뉴/상품 관리, 주문 접수·처리(포장/배달) 기능 추가
  - 주방/매장 실시간 주문 현황, 소비자 주문 UX 개선
- **3단계: 플랫폼 고도화**
  - 분석 대시보드, 마케팅/알림 자동화, 충성도 프로그램
  - 외부 서비스(배달 플랫폼, 회계/세무, 메시지 API)와의 연동 확대

## 8. 주요 기술 고려사항 및 리스크

- **확장성:** 테넌트 증가 대비 수평 확장 구조, 테넌트별 리소스 한도 관리
- **보안 및 규제 준수:** 테넌트/사용자 데이터 격리, 접근 제어, 로그 감사, 국내 개인정보보호법 준수
- **결제 게이트웨이:** 반복 결제, 가상계좌, 간편결제 등 국내 결제 수단을 지원 가능한 PG 선정
- **운영/유지보수:** 공통 코드·디자인 시스템 재사용, 설정 기반 커스터마이징, 자동화된 테스트·배포 파이프라인 확보
- **코어 데이터 성능:** PL/SQL 사용 시 코드 품질 관리, DB 락/경쟁 상태 감시, 장애 대응 절차 마련

## 9. Supporting Documents & Alignment

- `ARCHITECTURE_OVERVIEW.md`: 서비스·포털 구성, 멀티테넌시 구현, 배포/보안 전략 상세 설명
- `DATA_CORE_AND_PL_SQL.md`: 데이터 모델 원칙, PL/SQL 정산/집계 배치, 코드 한글 필드 정책, 장애 대응 포함
- 두 문서는 본 확장 계획의 1~8장 내용을 구체화하며, MindGarden 기존 역량과 신규 플랫폼 병행 운영 전략에 정합하게 정리됨

## 10. Phase 1 (학원) Next Steps

1. 멀티테넌시 구현 세부 설계 확정 (TenantContext, Repository 추상화, 마이그레이션 시나리오)
2. 학원용 관리자/소비자 플로우 UX 프로토타입 작성 및 검증
3. 정산/집계 PL/SQL 패키지 시퀀스 정의와 배치 스케줄 설계
4. 공통 코드 한글 필드 적용을 위한 코드 관리 UI 및 API 요구 사항 명세
5. QA 전략 수립: E2E 시나리오(수강 신청→결제→정산), 성능/회귀 테스트 계획
6. Phase 1 출시 범위 확정 후 개발 일정/자원 계획 수립
