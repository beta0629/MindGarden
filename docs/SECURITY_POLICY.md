# MindGarden 보안 정책 문서

## 1. 개요

본 문서는 MindGarden 플랫폼의 보안 정책 및 규정 준수 사항을 명시합니다.

**문서 버전:** 1.0.0  
**최종 업데이트:** 2025-01-17  
**담당자:** 보안팀

---

## 2. 보안 원칙

### 2.1 기본 원칙

1. **최소 권한 원칙 (Principle of Least Privilege)**
   - 사용자 및 시스템은 필요한 최소한의 권한만 부여
   - 역할 기반 접근 제어(RBAC) 구현

2. **방어적 프로그래밍 (Defensive Programming)**
   - 모든 입력값 검증 및 산출화
   - 예외 처리 및 오류 메시지 관리

3. **암호화 우선 (Encryption First)**
   - 전송 중 데이터 암호화 (HTTPS/TLS)
   - 저장 중 데이터 암호화 (개인정보 필수)

4. **감사 및 모니터링 (Audit & Monitoring)**
   - 모든 보안 이벤트 로깅
   - 실시간 모니터링 및 알림

---

## 3. 개인정보 보호

### 3.1 개인정보 암호화

**암호화 대상:**
- 이름, 전화번호, 생년월일, 성별, 닉네임 등 개인식별정보
- 상담 기록, 결제 정보 등 민감정보

**암호화 방식:**
- 알고리즘: AES-256-CBC
- 키 관리: 환경변수 기반 (하드코딩 금지)
- 키 로테이션: 분기별 또는 보안 이벤트 발생 시

**환경변수 설정:**
```bash
PERSONAL_DATA_ENCRYPTION_KEY=<32자 이상의 암호화 키>
PERSONAL_DATA_ENCRYPTION_IV=<16자 IV>
```

**다중 키/로테이션 설정:**
```bash
# 활성 키 ID 지정
PERSONAL_DATA_ENCRYPTION_ACTIVE_KEY_ID=v2

# 키/IV 목록 (쉼표 구분, 항목은 keyId:Base64EncodedValue)
PERSONAL_DATA_ENCRYPTION_KEYS=v2:Q29vbFNlY3JldEtleTIzIT8=,v1:QmFja3VwS2V5MTIzIT8=
PERSONAL_DATA_ENCRYPTION_IVS=v2:Q29vbElWMjMxMjM=,v1:QmFja3VwSXYxMjM=
```

### 3.2 개인정보 접근 제어

**접근 로깅:**
- 모든 개인정보 접근은 `personal_data_access_logs` 테이블에 기록
- 접근자, 접근 시간, 접근 유형, IP 주소, 사유 등 기록

**접근 권한:**
- 본인: 자신의 개인정보만 열람 가능
- 관리자: 업무상 필요한 범위 내에서만 접근
- 본사 관리자: 전체 데이터 접근 가능 (감사 로그 필수)

### 3.3 개인정보 보관 및 파기

**보관 기간:**
- 회원 정보: 회원 탈퇴 후 1년
- 상담 기록: 상담 완료 후 5년
- 결제 정보: 거래 완료 후 5년 (전자금융거래법)
- 급여 정보: 급여 지급 후 3년

**파기 방법:**
- 자동 파기: 매일 새벽 3시 배치 작업 실행
- 수동 파기: 관리자 승인 후 즉시 처리
- 물리적 파기: 데이터베이스 완전 삭제

---

## 4. 인증 및 세션 관리

### 4.1 인증 방식

**지원 방식:**
- 이메일/비밀번호 인증
- 소셜 로그인 (Kakao, Naver)
- 세션 기반 인증

**비밀번호 정책:**
- 최소 8자 이상
- 영문, 숫자, 특수문자 조합 권장
- BCrypt 해싱 (Salt 자동 생성)

### 4.2 세션 관리

**세션 타임아웃:**
- 기본: 1시간
- 자동 연장: 활동 시 연장 (최대 8시간)
- 비활성 타임아웃: 30분

**세션 보안:**
- HTTP-only 쿠키 사용
- Secure 쿠키 (HTTPS 환경)
- SameSite=Strict 설정
- 중복 로그인 방지

### 4.3 계정 보안

**로그인 시도 제한:**
- 연속 실패 5회 시 계정 잠금 (30분)
- IP 기반 차단 (1시간)

**비밀번호 변경:**
- 최소 90일마다 변경 권장
- 최근 5개 비밀번호 재사용 불가

---

## 5. 네트워크 보안

### 5.1 통신 암호화

**HTTPS/TLS:**
- 모든 통신은 TLS 1.2 이상 사용
- 인증서 갱신 자동화
- HSTS (HTTP Strict Transport Security) 적용

**API 보안:**
- CSRF 토큰 검증
- CORS 정책 설정
- Rate Limiting 적용

### 5.2 방화벽 및 네트워크 분리

**네트워크 구조:**
- 웹 서버: DMZ 구간
- 애플리케이션 서버: 내부 네트워크
- 데이터베이스: 프라이빗 네트워크

**포트 관리:**
- 필요한 포트만 개방
- 기본 포트 사용 지양

---

## 6. 데이터베이스 보안

### 6.1 접근 제어

**데이터베이스 계정:**
- 애플리케이션 계정: 읽기/쓰기 권한만
- 백업 계정: 읽기 전용
- 관리자 계정: 최소 사용

**연결 보안:**
- SSL/TLS 연결 필수
- IP 화이트리스트 적용

### 6.2 데이터 백업

**백업 정책:**
- 일일 전체 백업 (새벽 2시)
- 시간별 증분 백업
- 백업 파일 암호화 저장
- 백업 보관 기간: 30일

**복구 절차:**
- 복구 시나리오 문서화
- 정기 복구 테스트 (분기별)

---

## 7. 애플리케이션 보안

### 7.1 입력 검증

**검증 항목:**
- SQL Injection 방지 (PreparedStatement 사용)
- XSS 방지 (입력값 이스케이프)
- 파일 업로드 검증 (확장자, 크기, MIME 타입)
- 경로 탐색 방지

### 7.2 오류 처리

**오류 메시지:**
- 상세한 오류 정보는 로그에만 기록
- 사용자에게는 일반적인 오류 메시지만 표시
- 스택 트레이스 노출 금지

### 7.3 의존성 관리

**보안 업데이트:**
- 정기적인 의존성 취약점 스캔 (월 1회)
- 보안 패치 즉시 적용
- 취약한 라이브러리 사용 금지

---

## 8. 모니터링 및 감사

### 8.1 보안 이벤트 모니터링

**모니터링 대상:**
- 로그인 실패 시도
- 권한 변경
- 개인정보 접근
- 비정상적인 API 호출
- 시스템 오류

**알림 설정:**
- 보안 이벤트 발생 시 즉시 알림
- 알림 채널: 이메일, SMS, Slack

### 8.2 감사 로그

**로그 보관:**
- 보안 이벤트: 3년
- 개인정보 접근: 1년
- 일반 로그: 90일

**로그 무결성:**
- 로그 파일 무결성 검증
- 로그 변조 방지 (WORM 스토리지)

---

## 9. 규정 준수

### 9.1 개인정보보호법

**준수 사항:**
- 개인정보 처리방침 공개
- 개인정보 열람/정정/삭제 요청 처리
- 개인정보 처리 현황 공개
- 개인정보 영향평가 수행

**처리 기간:**
- 열람/정정 요청: 10일 이내
- 삭제 요청: 5일 이내

### 9.2 전자금융거래법

**준수 사항:**
- 거래 내역 보관 (5년)
- 분쟁 조정 로그 기록
- 이중 결제 검증
- 부분 환불 처리

### 9.3 정보통신망법

**준수 사항:**
- 해킹/침해사고 신고 (24시간 이내)
- 보안 점검 (연 1회 이상)
- 취약점 점검 및 보완

---

## 10. 보안 사고 대응

### 10.1 사고 분류

**심각도:**
- Critical: 데이터 유출, 시스템 다운
- High: 인증 우회, 권한 상승
- Medium: 개인정보 무단 접근
- Low: 보안 설정 오류

### 10.2 대응 절차

1. **사고 발견 및 보고** (즉시)
2. **초기 대응** (1시간 이내)
   - 영향 범위 파악
   - 추가 피해 방지
3. **조사 및 분석** (24시간 이내)
4. **복구 및 조치** (48시간 이내)
5. **사후 보고** (1주일 이내)

### 10.3 연락처

**보안팀:**
- 이메일: security@mindgarden.com
- 긴급 연락: 02-1234-5678

---

## 11. 보안 교육 및 인식

### 11.1 보안 교육

**대상:**
- 신규 입사자: 입사 시 보안 교육 필수
- 전체 직원: 분기별 보안 교육
- 개발자: 보안 코딩 교육

**교육 내용:**
- 개인정보 보호
- 보안 코딩 가이드라인
- 보안 사고 대응 절차

### 11.2 보안 인식

**정기 점검:**
- 보안 정책 준수 여부 점검 (분기별)
- 보안 설정 검토 (월 1회)
- 취약점 스캔 (월 1회)

---

## 12. 보안 개선 계획

### 12.1 단기 계획 (3개월)

- [ ] 외부 보안 감사 수행
- [ ] 개인정보보호법 준수 기능 완성
- [ ] 보안 모니터링 시스템 구축
- [ ] 보안 정책 문서화 완료
- [x] 암호화 키 로테이션 메커니즘 구현
- [ ] 암호화 키 로테이션 운영 절차 수립 (운영팀 매뉴얼)

### 12.2 중기 계획 (6개월)

- [ ] 암호화 키 로테이션 자동화
- [ ] 보안 이벤트 자동 대응 시스템
- [ ] 침해 탐지 시스템(IDS) 도입
- [ ] 보안 인증 취득 (ISO 27001 준비)

### 12.3 장기 계획 (12개월)

- [ ] ISO 27001 인증 취득
- [ ] 개인정보보호 인증 취득
- [ ] 침투 테스트 정기 수행
- [ ] 보안 운영 센터(SOC) 구축

---

## 13. 부칙

### 13.1 문서 관리

- 본 문서는 분기별로 검토 및 업데이트
- 보안 정책 변경 시 모든 직원에게 공지
- 문서 버전 관리 필수

### 13.2 문의

보안 정책 관련 문의사항은 보안팀으로 연락주시기 바랍니다.

---

**문서 승인:**

- 작성자: 보안팀
- 검토자: CTO
- 승인자: CEO
- 최종 승인일: 2025-01-17

