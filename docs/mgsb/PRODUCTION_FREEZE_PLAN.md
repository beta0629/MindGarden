# 운영 서버 프리징 계획

> **작성일:** 2025-01-XX  
> **목적:** 최종 버전 운영 배포 후, 도메인 변경 작업 전까지 운영 서버 프리징  
> **기간:** 도메인 변경 작업 완료 시까지

## 1. 프리징 범위

### 1.1 프리징 대상
- **운영 서버**: `beta74.cafe24.com` (m-garden.co.kr)
- **프리징 기간**: 도메인 변경 작업 완료 시까지
- **프리징 목적**: 안정적인 서비스 운영 유지 및 도메인 변경 작업 준비

### 1.2 프리징 내용
- ✅ **코드 변경 금지**: 운영 서버에 대한 코드 변경 및 배포 중단
- ✅ **설정 변경 금지**: 환경 변수, Nginx 설정 등 변경 금지
- ✅ **데이터베이스 스키마 변경 금지**: 마이그레이션, 프로시저 변경 등 금지
- ✅ **서비스 재시작 금지**: 수동 재시작, 업데이트 등 금지

### 1.3 허용 사항
- ✅ **긴급 버그 수정**: 치명적인 버그 발생 시에만 예외적으로 허용
- ✅ **보안 패치**: 보안 취약점 발견 시 즉시 패치
- ✅ **모니터링**: 서비스 상태 모니터링 및 로그 확인
- ✅ **데이터 백업**: 정기적인 데이터 백업 수행

## 2. 프리징 전 최종 배포 체크리스트

### 2.1 배포 전 확인
- [x] 모든 기능 테스트 완료
- [x] OAuth2 로그인 정상 동작 확인
- [x] JWT 토큰 발급 정상 동작 확인
- [x] 모달 z-index 문제 해결 확인
- [x] 빌드 오류 없음 확인
- [x] 린터 경고 확인 (치명적 오류 없음)

### 2.2 배포 후 검증
- [ ] 운영 서버 헬스체크 통과
- [ ] 로그인 기능 정상 동작
- [ ] 카카오/네이버 소셜 로그인 정상 동작
- [ ] 관리자 대시보드 접속 확인
- [ ] 주요 기능 정상 동작 확인
- [ ] 에러 로그 확인 (치명적 오류 없음)

## 3. 프리징 관리 방법

### 3.1 GitHub 브랜치 전략
```
develop (개발 중) → main (프리징) → core-solution (도메인 변경 작업)
```

**프리징 기간 중:**
- `main` 브랜치: **프리징** (운영 서버 배포 금지)
- `develop` 브랜치: 개발 계속 진행 (개발 서버만 배포)
- `core-solution` 브랜치: 도메인 변경 작업 전용

### 3.2 GitHub Actions 워크플로우 설정

**운영 배포 워크플로우 비활성화:**
```yaml
# .github/workflows/deploy-production.yml
on:
  # 프리징 기간 중 자동 배포 비활성화
  # push:
  #   branches: [ main ]
  workflow_dispatch:
    # 수동 실행만 가능하지만, 프리징 기간 중에는 실행 금지
```

**프리징 알림 추가:**
- GitHub Actions에 프리징 상태 표시
- 배포 시도 시 프리징 경고 메시지 표시

### 3.3 문서화
- [x] 프리징 계획 문서 작성
- [ ] 프리징 시작 일시 기록
- [ ] 프리징 해제 일시 기록
- [ ] 프리징 기간 중 발생한 이슈 기록

## 4. 프리징 기간 중 작업 계획

### 4.1 개발 서버 작업
- ✅ 개발 서버에서 도메인 변경 작업 테스트
- ✅ 새로운 도메인 설정 테스트
- ✅ OAuth2 콜백 URL 변경 테스트
- ✅ DNS 설정 테스트
- ✅ SSL 인증서 발급 테스트

### 4.2 도메인 변경 준비
- [ ] `core-solution.co.kr` 도메인 등록 확인
- [ ] `e-trinity.co.kr` 도메인 등록 확인
- [ ] DNS 레코드 설정 계획 수립
- [ ] SSL 인증서 발급 계획 수립
- [ ] OAuth2 Provider 설정 변경 계획 수립

### 4.3 회사 홈페이지 구축
- [ ] `e-trinity.co.kr` 기본 구조 설계
- [ ] 온보딩 플로우 설계
- [ ] Core-Solution API 연동 설계
- [ ] 결제 연동 설계

## 5. 긴급 상황 대응

### 5.1 프리징 해제 조건
다음 상황 발생 시 프리징을 해제하고 즉시 수정:

1. **치명적인 보안 취약점 발견**
   - 즉시 패치 및 배포
   - 프리징 해제 사유 문서화

2. **서비스 중단 발생**
   - 원인 파악 및 긴급 수정
   - 프리징 해제 사유 문서화

3. **데이터 손실 위험**
   - 즉시 백업 및 복구
   - 프리징 해제 사유 문서화

### 5.2 긴급 배포 프로세스
```
1. 이슈 발견 및 심각도 평가
   ↓
2. 프리징 해제 승인 (최소 2명 이상)
   ↓
3. 긴급 수정 및 테스트
   ↓
4. 운영 배포 실행
   ↓
5. 배포 후 검증
   ↓
6. 프리징 재적용
   ↓
7. 이슈 및 해제 사유 문서화
```

## 6. 프리징 해제 계획

### 6.1 해제 조건
- [ ] 도메인 변경 작업 완료
- [ ] 새로운 도메인 테스트 완료
- [ ] OAuth2 콜백 URL 변경 완료
- [ ] DNS 설정 완료
- [ ] SSL 인증서 발급 완료
- [ ] 회사 홈페이지 구축 완료
- [ ] 통합 테스트 완료

### 6.2 해제 프로세스
```
1. 도메인 변경 작업 완료 확인
   ↓
2. 새로운 도메인으로 운영 배포
   ↓
3. 기존 도메인 리디렉션 설정
   ↓
4. 프리징 해제 및 정상 운영 재개
   ↓
5. 프리징 기간 중 작업 내역 문서화
```

## 7. 모니터링 및 알림

### 7.1 모니터링 항목
- 서비스 가용성 (Uptime)
- 응답 시간 (Response Time)
- 에러율 (Error Rate)
- 로그인 성공률
- OAuth2 로그인 성공률
- 데이터베이스 연결 상태
- 메모리 사용량
- 디스크 사용량

### 7.2 알림 설정
- 서비스 다운 알림
- 에러율 증가 알림
- 응답 시간 지연 알림
- 디스크 사용량 경고
- 메모리 사용량 경고

## 8. 체크리스트

### 8.1 프리징 시작 전
- [x] 최종 버전 운영 배포 완료
- [x] 배포 후 검증 완료
- [x] 프리징 계획 문서 작성
- [ ] GitHub Actions 워크플로우 설정 확인
- [ ] 모니터링 설정 확인
- [ ] 알림 설정 확인

### 8.2 프리징 기간 중
- [ ] 주간 모니터링 리포트 작성
- [ ] 이슈 발생 시 즉시 기록
- [ ] 긴급 상황 대응 계획 준비
- [ ] 도메인 변경 작업 진행

### 8.3 프리징 해제 전
- [ ] 도메인 변경 작업 완료 확인
- [ ] 새로운 도메인 테스트 완료
- [ ] 통합 테스트 완료
- [ ] 프리징 해제 승인

## 9. 연락처 및 책임자

### 9.1 책임자
- **운영 서버 관리**: [담당자명]
- **도메인 변경 작업**: [담당자명]
- **긴급 상황 대응**: [담당자명]

### 9.2 연락 방법
- **이메일**: [이메일 주소]
- **슬랙**: [슬랙 채널]
- **전화**: [전화번호]

---

**프리징 시작 일시:** [YYYY-MM-DD HH:MM]  
**프리징 해제 일시:** [예정: 도메인 변경 작업 완료 시]  
**현재 상태:** ✅ 프리징 준비 완료, 최종 배포 대기 중

