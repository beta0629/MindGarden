# ê°œë°œ ê°€ì´ë“œ

## ğŸ“‹ ê°œë°œ ì›ì¹™

### **1. ìƒìˆ˜ ì •ì˜ ì›ì¹™**
- ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê°’ì€ ìƒìˆ˜ í´ë˜ìŠ¤ì— ì •ì˜
- í•˜ë“œì½”ë”© ê¸ˆì§€
- ìƒìˆ˜ í´ë˜ìŠ¤ëŠ” `constant` íŒ¨í‚¤ì§€ì— ìœ„ì¹˜

### **2. ê³µí†µí™” ë° ìº¡ìŠí™” ì›ì¹™**
- ê³µí†µ ê¸°ëŠ¥ì€ Base í´ë˜ìŠ¤ì— êµ¬í˜„
- ì¤‘ë³µ ì½”ë“œ ì œê±°
- ì¼ê´€ëœ ì¸í„°í˜ì´ìŠ¤ ì œê³µ

### **3. Hibernate ì„¤ì • ì›ì¹™**
- **ë¡œì»¬ í™˜ê²½**: `ddl-auto: update` ì‚¬ìš©ìœ¼ë¡œ ê°œë°œìš© í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸ âœ…
- **ìš´ì˜ í™˜ê²½**: `ddl-auto: validate` ì‚¬ìš©ìœ¼ë¡œ ìŠ¤í‚¤ë§ˆ ê²€ì¦ë§Œ ìˆ˜í–‰
- ì—”í‹°í‹° ë³€ê²½ ì‹œ í™˜ê²½ì— ë”°ë¼ ì ì ˆí•œ DDL ì •ì±… ì ìš© âœ…
- **ìŠ¤í‚¤ë§ˆ ìƒì„± ì˜¤ë¥˜ í•´ê²° ì™„ë£Œ**: ëª¨ë“  ì—”í‹°í‹°ê°€ ì •ìƒì ìœ¼ë¡œ í…Œì´ë¸” ìƒì„±ë¨ âœ…

### **4. ê°œë°œ í™˜ê²½ ì„¤ì • ì›ì¹™**
- **isDev í”„ë¡œí¼í‹°**: ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œë§Œ `true`ë¡œ ì„¤ì •
- **ë³´ì•ˆ ì™„í™”**: ê°œë°œ í™˜ê²½ì—ì„œë§Œ ë³´ì•ˆ ì„¤ì • ì™„í™” í—ˆìš©
- **CORS ì„¤ì •**: ê°œë°œ í™˜ê²½ì—ì„œ ëª¨ë“  ë„ë©”ì¸ í—ˆìš©
- **ìˆœí™˜ ì°¸ì¡°**: ê°œë°œ í™˜ê²½ì—ì„œë§Œ `allow-circular-references: true` í—ˆìš©

### **5. ì†Œì…œ ë¡œê·¸ì¸ êµ¬í˜„ ì›ì¹™**
- **OAuth2 í†µí•© ì•„í‚¤í…ì²˜**: `AbstractOAuth2Service` ê¸°ë°˜ í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡° âœ…
- **ë‹¤ì¤‘ ì†Œì…œ ê³„ì • ì§€ì›**: í•˜ë‚˜ì˜ ì‚¬ìš©ìì—ê²Œ ì—¬ëŸ¬ ì†Œì…œ ê³„ì • ì—°ê²° ê°€ëŠ¥ âœ…
- **ì•”í˜¸í™” ë³´ì•ˆ**: ê°œì¸ì •ë³´ëŠ” AES ì•”í˜¸í™”ë¡œ ì €ì¥, `providerUserId`ëŠ” í‰ë¬¸ ì €ì¥ âœ…
- **ì—­í•  ê¸°ë°˜ ë¦¬ë‹¤ì´ë ‰íŠ¸**: ì‚¬ìš©ì ì—­í• ì— ë”°ë¥¸ ëŒ€ì‹œë³´ë“œ ìë™ ì´ë™ âœ…

## ğŸš€ ê°œë°œ ì§„í–‰ ìƒí™©

### **âœ… ì™„ë£Œëœ ê¸°ëŠ¥**

#### **1. ê¸°ë³¸ ì¸í”„ë¼**
- [x] Spring Boot í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ì •
- [x] Hibernate JPA ì„¤ì • ë° ì—”í‹°í‹° ì„¤ê³„
- [x] Base í´ë˜ìŠ¤ ê³„ì¸µ êµ¬ì¡° êµ¬í˜„
- [x] ìƒìˆ˜ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•
- [x] ì˜ˆì™¸ ì²˜ë¦¬ ë° ë¡œê¹… ì‹œìŠ¤í…œ

#### **2. ì‚¬ìš©ì ê´€ë¦¬**
- [x] User ì—”í‹°í‹° ë° ìƒì† êµ¬ì¡° (Client, Consultant, Admin)
- [x] ì‚¬ìš©ì ë“±ë¡/ìˆ˜ì •/ì¡°íšŒ ì„œë¹„ìŠ¤
- [x] ê°œì¸ì •ë³´ ì•”í˜¸í™” ì‹œìŠ¤í…œ (AES/CBC/PKCS5Padding)
- [x] ì„¸ì…˜ ê´€ë¦¬ ë° JWT í† í° ì‹œìŠ¤í…œ

#### **3. ì†Œì…œ ë¡œê·¸ì¸ ì‹œìŠ¤í…œ**
- [x] **ì¹´ì¹´ì˜¤ OAuth2 ë¡œê·¸ì¸** âœ…
- [x] **ë„¤ì´ë²„ OAuth2 ë¡œê·¸ì¸** âœ…
- [x] í†µí•© OAuth2 ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜
- [x] ì†Œì…œ ê³„ì • ì—°ë™ ë° ì‚¬ìš©ì ë§¤í•‘
- [x] ê°„í¸ íšŒì›ê°€ì… ëª¨ë‹¬ ì‹œìŠ¤í…œ

#### **4. UI/UX ì‹œìŠ¤í…œ**
- [x] **í…Œë¸”ë¦¿ ì „ìš© ë¡œê·¸ì¸/íšŒì›ê°€ì… í˜ì´ì§€** âœ…
- [x] **ë‚´ë‹´ì ëŒ€ì‹œë³´ë“œ** âœ…
- [x] íŒŒìŠ¤í…”í†¤ ë””ìì¸ ì‹œìŠ¤í…œ
- [x] ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ
- [x] ê³µí†µ ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œ (Modal, Alert, Loading)

### **ğŸ”„ ì§„í–‰ ì¤‘ì¸ ê¸°ëŠ¥**
- [ ] ìƒë‹´ì‚¬ ëŒ€ì‹œë³´ë“œ
- [ ] ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
- [ ] ìƒë‹´ ì˜ˆì•½ ì‹œìŠ¤í…œ
- [ ] ìƒë‹´ ê¸°ë¡ ê´€ë¦¬

### **ğŸ“‹ ì˜ˆì •ëœ ê¸°ëŠ¥**
- [ ] ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ
- [ ] íŒŒì¼ ì—…ë¡œë“œ ì‹œìŠ¤í…œ
- [ ] ê²°ì œ ì‹œìŠ¤í…œ ì—°ë™
- [ ] ëª¨ë°”ì¼ ì•± API

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ íŒ¨í„´

### **Base í´ë˜ìŠ¤ ìƒì† êµ¬ì¡°**

#### **ì—”í‹°í‹° ê³„ì¸µ**
```java
// ëª¨ë“  ì—”í‹°í‹°ëŠ” BaseEntityë¥¼ ìƒì†
@Entity
@Table(name = "users")
public class User extends BaseEntity {
    // ì—”í‹°í‹°ë³„ ê³ ìœ  í•„ë“œ
}

@Entity
@Table(name = "clients")
public class Client extends User {
    // ë‚´ë‹´ì ì „ìš© í•„ë“œ
}

@Entity
@Table(name = "consultants")
public class Consultant extends User {
    // ìƒë‹´ì‚¬ ì „ìš© í•„ë“œ
}
```

#### **Repository ê³„ì¸µ**
```java
// ëª¨ë“  RepositoryëŠ” BaseRepositoryë¥¼ ìƒì†
public interface UserRepository extends BaseRepository<User, Long> {
    // ì‚¬ìš©ì ì „ìš© ì¿¼ë¦¬ ë©”ì„œë“œ
    Optional<User> findByEmail(String email);
    List<User> findByRole(String role);
}
```

#### **Service ê³„ì¸µ**
```java
// ëª¨ë“  ServiceëŠ” BaseServiceë¥¼ ìƒì†
public interface UserService extends BaseService<User, Long> {
    // ì‚¬ìš©ì ì „ìš© ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    User registerUser(User user);
    void changePassword(Long userId, String oldPassword, String newPassword);
}

// êµ¬í˜„ì²´ëŠ” BaseServiceImplì„ ìƒì†
@Service
@Transactional
public class UserServiceImpl extends BaseServiceImpl<User, Long> implements UserService {
    
    @Override
    public BaseRepository<User, Long> getRepository() {
        return userRepository;
    }
    
    // ì‚¬ìš©ì ì „ìš© ë©”ì„œë“œ êµ¬í˜„
}
```

#### **Controller ê³„ì¸µ**
```java
// ëª¨ë“  ControllerëŠ” BaseControllerë¥¼ ìƒì†
@RestController
@RequestMapping("/api/users")
public class UserController implements BaseController<User, Long> {
    
    @Override
    public UserService getService() {
        return userService;
    }
    
    // ì‚¬ìš©ì ì „ìš© ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
    @PostMapping("/register")
    public ResponseEntity<User> registerUser(@RequestBody User user) {
        User registeredUser = userService.registerUser(user);
        return ResponseEntity.status(HttpStatus.CREATED).body(registeredUser);
    }
}
```

## ğŸš€ ê°œë°œ í™˜ê²½ ì„¤ì •

### **ë¡œì»¬ ê°œë°œ í™˜ê²½ í™œì„±í™”**

#### **1. í”„ë¡œíŒŒì¼ ì„¤ì •**
```bash
# Maven í”„ë¡œíŒŒì¼ë¡œ ì‹¤í–‰ (ê¶Œì¥)
mvn spring-boot:run -Dspring-boot.run.profiles=local

# í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •
export SPRING_PROFILES_ACTIVE=local
mvn spring-boot:run
```

#### **2. isDev í”„ë¡œí¼í‹° í™•ì¸**
```yaml
# application-local.yml
isDev: true
isLocal: true
isDevelopment: true

# ê°œë°œ í™˜ê²½ ì „ìš© ì„¤ì •
development:
  database:
    initialize: true
    seed-data: true
  security:
    oauth2:
      enabled: false
    jwt:
      secret: "dev-secret-key-for-local-testing-only"
  api:
    cors:
      allowed-origins: "*"
      allowed-methods: "*"
      allowed-headers: "*"
```

#### **3. ê°œë°œ í™˜ê²½ ì „ìš© ì„¤ì • í´ë˜ìŠ¤**
```java
@Configuration
@Profile("local")
public class DevelopmentConfig implements WebMvcConfigurer {
    
    @Value("${isDev:false}")
    private boolean isDev;
    
    // ê°œë°œ í™˜ê²½ì—ì„œë§Œ CORS ì™„ì „ í—ˆìš©
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        if (isDev) {
            registry.addMapping("/**")
                    .allowedOriginPatterns("*")
                    .allowedMethods("*")
                    .allowedHeaders("*");
        }
    }
}
```

### **í™˜ê²½ë³„ ì„¤ì • ì°¨ì´ì **

| ì„¤ì • í•­ëª© | ë¡œì»¬ (isDev: true) | ìš´ì˜ (isDev: false) |
|-----------|---------------------|---------------------|
| **Hibernate ddl-auto** | `create-drop` | `validate` |
| **CORS** | ëª¨ë“  ë„ë©”ì¸ í—ˆìš© | ì œí•œì  í—ˆìš© |
| **ë³´ì•ˆ** | ì™„í™” (ê°œë°œìš©) | ê°•í™” (ìš´ì˜ìš©) |
| **ìˆœí™˜ ì°¸ì¡°** | í—ˆìš© | ê¸ˆì§€ |
| **ë¡œê¹…** | DEBUG ë ˆë²¨ | INFO ë ˆë²¨ |
| **ìºì‹œ** | ë¹„í™œì„±í™” | í™œì„±í™” |

## ğŸ”§ ê³µí†µ ê¸°ëŠ¥ ì‚¬ìš©ë²•

### **BaseEntity í™œìš©**

#### **ìƒëª…ì£¼ê¸° í›… ì‚¬ìš©**
```java
@Entity
public class CustomEntity extends BaseEntity {
    
    @PrePersist
    protected void onCreate() {
        super.onCreate();
        // ì—”í‹°í‹° ìƒì„± ì‹œ ì¶”ê°€ ë¡œì§
    }
    
    @PreUpdate
    protected void onUpdate() {
        super.onUpdate();
        // ì—”í‹°í‹° ìˆ˜ì • ì‹œ ì¶”ê°€ ë¡œì§
    }
}
```

#### **ë‚™ê´€ì  ë½ í™œìš©**
```java
@Service
public class CustomService {
    
    public void updateEntity(Long id, CustomEntity updateData) {
        CustomEntity entity = repository.findById(id)
            .orElseThrow(() -> new EntityNotFoundException("ì—”í‹°í‹°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."));
        
        // ë²„ì „ ì¶©ëŒ ì‹œ OptimisticLockException ë°œìƒ
        entity.setName(updateData.getName());
        repository.save(entity);
    }
}
```

### **BaseRepository í™œìš©**

#### **í™œì„± ì—”í‹°í‹° ì¡°íšŒ**
```java
// í™œì„± ìƒíƒœì¸ ì—”í‹°í‹°ë§Œ ì¡°íšŒ
List<User> activeUsers = userRepository.findAllActive();

// í˜ì´ì§• ì¡°íšŒ
Page<User> userPage = userRepository.findAllActive(Pageable.ofSize(20));

// íŠ¹ì • ê¸°ê°„ì— ìƒì„±ëœ ì—”í‹°í‹° ì¡°íšŒ
LocalDateTime startDate = LocalDateTime.now().minusDays(30);
LocalDateTime endDate = LocalDateTime.now();
List<User> recentUsers = userRepository.findByCreatedAtBetween(startDate, endDate);
```

#### **ì¤‘ë³µ ê²€ì‚¬**
```java
// ì´ë©”ì¼ ì¤‘ë³µ ê²€ì‚¬ (í™œì„± ìƒíƒœë§Œ)
boolean isDuplicate = userRepository.isDuplicateExcludingId(userId, "email", email);

// ì „ì²´ ì¤‘ë³µ ê²€ì‚¬ (ì‚­ì œëœ ê²ƒ í¬í•¨)
boolean isDuplicateAll = userRepository.isDuplicateExcludingIdAll(userId, "email", email, true);
```

#### **í†µê³„ ì •ë³´ ì¡°íšŒ**
```java
Object[] stats = userRepository.getEntityStatistics();
long totalCount = (Long) stats[0];
long deletedCount = (Long) stats[1];
long activeCount = (Long) stats[2];
```

### **BaseService í™œìš©**

#### **ìƒëª…ì£¼ê¸° í›… êµ¬í˜„**
```java
@Service
public class CustomServiceImpl extends BaseServiceImpl<CustomEntity, Long> {
    
    @Override
    public void beforeSave(CustomEntity entity) {
        // ì €ì¥ ì „ ê²€ì¦ ë¡œì§
        validateBusinessRules(entity);
    }
    
    @Override
    public void afterSave(CustomEntity entity) {
        // ì €ì¥ í›„ ì²˜ë¦¬ ë¡œì§
        sendNotification(entity);
    }
    
    @Override
    public void validateEntity(CustomEntity entity) {
        // ì—”í‹°í‹° ìœ íš¨ì„± ê²€ì¦
        if (entity.getName() == null || entity.getName().trim().isEmpty()) {
            throw new ValidationException("ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
    }
    
    @Override
    public void validateBusinessRules(CustomEntity entity) {
        // ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê²€ì¦
        if (entity.getAge() < 0) {
            throw new ValidationException("ë‚˜ì´ëŠ” 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
        }
    }
}
```

#### **ë¶€ë¶„ ì—…ë°ì´íŠ¸**
```java
@Service
public class UserServiceImpl extends BaseServiceImpl<User, Long> {
    
    public User updateUserProfile(Long userId, User updateData) {
        // nullì´ ì•„ë‹Œ í•„ë“œë§Œ ì—…ë°ì´íŠ¸
        return partialUpdate(userId, updateData);
    }
}
```

### **BaseController í™œìš©**

#### **ê¸°ë³¸ CRUD ì—”ë“œí¬ì¸íŠ¸ ìë™ ì œê³µ**
```java
@RestController
@RequestMapping("/api/users")
public class UserController implements BaseController<User, Long> {
    
    // BaseControllerì—ì„œ ìë™ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸:
    // GET /api/users - ëª¨ë“  í™œì„± ì‚¬ìš©ì ì¡°íšŒ
    // GET /api/users/page - í˜ì´ì§• ì¡°íšŒ
    // GET /api/users/{id} - IDë¡œ ì¡°íšŒ
    // POST /api/users - ì‚¬ìš©ì ìƒì„±
    // PUT /api/users/{id} - ì „ì²´ ì—…ë°ì´íŠ¸
    // PATCH /api/users/{id} - ë¶€ë¶„ ì—…ë°ì´íŠ¸
    // DELETE /api/users/{id} - ì†Œí”„íŠ¸ ì‚­ì œ
    // POST /api/users/{id}/restore - ë³µêµ¬
    // DELETE /api/users/{id}/hard - í•˜ë“œ ì‚­ì œ
    
    // ì‚¬ìš©ì ì „ìš© ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
    @PostMapping("/register")
    public ResponseEntity<User> registerUser(@RequestBody User user) {
        User registeredUser = userService.registerUser(user);
        return ResponseEntity.status(HttpStatus.CREATED).body(registeredUser);
    }
}
```

## ğŸš¨ ì˜ˆì™¸ ì²˜ë¦¬ ê°€ì´ë“œ

### **ì˜ˆì™¸ í´ë˜ìŠ¤ ì‚¬ìš©ë²•**

#### **EntityNotFoundException**
```java
@Service
public class UserService {
    
    public User findUserById(Long id) {
        return userRepository.findById(id)
            .orElseThrow(() -> new EntityNotFoundException("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ID: " + id));
    }
}
```

#### **ValidationException**
```java
@Service
public class UserService {
    
    public void validateUser(User user) {
        if (user.getEmail() == null || user.getEmail().trim().isEmpty()) {
            throw new ValidationException("ì´ë©”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.");
        }
        
        if (user.getPassword() != null && user.getPassword().length() < 8) {
            throw new ValidationException("ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.");
        }
    }
}
```

### **ì»¨íŠ¸ë¡¤ëŸ¬ ì˜ˆì™¸ ì²˜ë¦¬**
```java
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(EntityNotFoundException.class)
    public ResponseEntity<ErrorResponse> handleEntityNotFound(EntityNotFoundException e) {
        ErrorResponse error = new ErrorResponse("NOT_FOUND", e.getMessage());
        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(error);
    }
    
    @ExceptionHandler(ValidationException.class)
    public ResponseEntity<ErrorResponse> handleValidation(ValidationException e) {
        ErrorResponse error = new ErrorResponse("VALIDATION_ERROR", e.getMessage());
        return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(error);
    }
}
```

## ğŸ“Š íŠ¸ëœì­ì…˜ ê´€ë¦¬

### **íŠ¸ëœì­ì…˜ ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©ë²•**

#### **ì„œë¹„ìŠ¤ ê³„ì¸µ íŠ¸ëœì­ì…˜**
```java
@Service
@Transactional
public class UserServiceImpl extends BaseServiceImpl<User, Long> {
    
    @Override
    @Transactional(readOnly = true)
    public List<User> findAllActive() {
        return super.findAllActive();
    }
    
    @Override
    public User save(User entity) {
        // ê¸°ë³¸ íŠ¸ëœì­ì…˜ ì„¤ì • ì‚¬ìš©
        return super.save(entity);
    }
    
    @Transactional(rollbackFor = Exception.class)
    public void complexOperation() {
        // ë³µì¡í•œ ì‘ì—… ì‹œ ë¡¤ë°± ì •ì±… ëª…ì‹œ
    }
}
```

## ğŸ” í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

### **Base í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸**

#### **Repository í…ŒìŠ¤íŠ¸**
```java
@SpringBootTest
@Transactional
class UserRepositoryTest {
    
    @Autowired
    private UserRepository userRepository;
    
    @Test
    void testFindAllActive() {
        // í™œì„± ì‚¬ìš©ìë§Œ ì¡°íšŒë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸
        List<User> activeUsers = userRepository.findAllActive();
        assertThat(activeUsers).allMatch(user -> !user.getIsDeleted());
    }
    
    @Test
    void testSoftDelete() {
        User user = createTestUser();
        userRepository.save(user);
        
        userRepository.softDeleteById(user.getId(), LocalDateTime.now());
        
        Optional<User> deletedUser = userRepository.findById(user.getId());
        assertThat(deletedUser).isPresent();
        assertThat(deletedUser.get().getIsDeleted()).isTrue();
    }
}
```

#### **Service í…ŒìŠ¤íŠ¸**
```java
@SpringBootTest
@Transactional
class UserServiceTest {
    
    @Autowired
    private UserService userService;
    
    @Test
    void testSaveWithLifecycleHooks() {
        User user = createTestUser();
        
        // beforeSave, afterSave í›…ì´ í˜¸ì¶œë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸
        User savedUser = userService.save(user);
        
        assertThat(savedUser.getId()).isNotNull();
        assertThat(savedUser.getCreatedAt()).isNotNull();
    }
}
```

## ğŸ“ ì½”ë”© ì»¨ë²¤ì…˜

### **í´ë˜ìŠ¤ ëª…ëª… ê·œì¹™**
- Base í´ë˜ìŠ¤: `Base` + ì—­í•  (ì˜ˆ: `BaseEntity`, `BaseService`)
- êµ¬í˜„ì²´: ì¸í„°í˜ì´ìŠ¤ëª… + `Impl` (ì˜ˆ: `UserServiceImpl`)
- ìƒìˆ˜ í´ë˜ìŠ¤: ëª…ì‚¬ + `s` (ì˜ˆ: `UserRoles`, `UserGrades`)

### **ë©”ì„œë“œ ëª…ëª… ê·œì¹™**
- ì¡°íšŒ: `findBy`, `findAll`, `getBy`
- ì €ì¥/ìˆ˜ì •: `save`, `update`, `create`
- ì‚­ì œ: `delete`, `remove`, `softDelete`
- ê²€ì¦: `validate`, `check`, `isValid`

### **í˜„ì¬ êµ¬í˜„ëœ íŒ¨í‚¤ì§€ êµ¬ì¡°** âœ…
```
com.mindgarden.consultation
â”œâ”€â”€ constant          # ìƒìˆ˜ í´ë˜ìŠ¤ (9ê°œ í´ë˜ìŠ¤)
â”‚   â”œâ”€â”€ UserRole.java / UserRoles.java
â”‚   â”œâ”€â”€ UserGrade.java / UserGrades.java
â”‚   â”œâ”€â”€ Gender.java
â”‚   â”œâ”€â”€ AgeGroup.java
â”‚   â”œâ”€â”€ AddressType.java
â”‚   â”œâ”€â”€ AlertType.java
â”‚   â”œâ”€â”€ ConsultationStatus.java
â”‚   â”œâ”€â”€ PaymentStatus.java
â”‚   â””â”€â”€ FileType.java
â”œâ”€â”€ entity           # ì—”í‹°í‹° í´ë˜ìŠ¤ (12ê°œ í´ë˜ìŠ¤)
â”‚   â”œâ”€â”€ BaseEntity.java (ê³µí†µ ê¸°ë°˜ í´ë˜ìŠ¤)
â”‚   â”œâ”€â”€ User.java / Client.java / Consultant.java
â”‚   â”œâ”€â”€ UserAddress.java / UserSocialAccount.java
â”‚   â”œâ”€â”€ Consultation.java / ConsultationRecord.java
â”‚   â”œâ”€â”€ Schedule.java / ClientConsultantMapping.java
â”‚   â”œâ”€â”€ Alert.java
â”‚   â””â”€â”€ ErrorMessage.java
â”œâ”€â”€ repository       # Repository ì¸í„°í˜ì´ìŠ¤ (5ê°œ)
â”‚   â”œâ”€â”€ BaseRepository.java (ê³µí†µ ê¸°ë°˜ ì¸í„°í˜ì´ìŠ¤)
â”‚   â”œâ”€â”€ UserRepository.java
â”‚   â”œâ”€â”€ ConsultationRepository.java
â”‚   â”œâ”€â”€ ConsultantRepository.java
â”‚   â””â”€â”€ AlertRepository.java
â”œâ”€â”€ service          # Service ì¸í„°í˜ì´ìŠ¤ ë° êµ¬í˜„ì²´ (7ê°œ)
â”‚   â”œâ”€â”€ BaseService.java (ê³µí†µ ê¸°ë°˜ ì¸í„°í˜ì´ìŠ¤)
â”‚   â”œâ”€â”€ UserService.java / AlertService.java
â”‚   â”œâ”€â”€ ConsultationService.java / ConsultantService.java
â”‚   â”œâ”€â”€ AuthService.java / JwtService.java
â”‚   â””â”€â”€ impl/        # Service êµ¬í˜„ì²´
â”‚       â”œâ”€â”€ BaseServiceImpl.java
â”‚       â”œâ”€â”€ UserServiceImpl.java / AlertServiceImpl.java
â”‚       â”œâ”€â”€ ConsultationServiceImpl.java / ConsultantServiceImpl.java
â”‚       â”œâ”€â”€ AuthServiceImpl.java
â”‚       â””â”€â”€ CustomUserDetailsService.java
â”œâ”€â”€ controller       # Controller í´ë˜ìŠ¤ (6ê°œ)
â”‚   â”œâ”€â”€ BaseController.java (ê³µí†µ ê¸°ë°˜ ì¸í„°í˜ì´ìŠ¤)
â”‚   â”œâ”€â”€ HomeController.java / UserController.java
â”‚   â”œâ”€â”€ AuthController.java / ConsultationController.java
â”‚   â”œâ”€â”€ ConsultantController.java
â”‚   â””â”€â”€ TabletController.java
â”œâ”€â”€ dto              # ë°ì´í„° ì „ì†¡ ê°ì²´ (5ê°œ)
â”‚   â”œâ”€â”€ AuthRequest.java / AuthResponse.java
â”‚   â”œâ”€â”€ RegisterRequest.java / UserDto.java
â”‚   â””â”€â”€ ErrorResponse.java
â”œâ”€â”€ config           # ì„¤ì • í´ë˜ìŠ¤ (5ê°œ)
â”‚   â”œâ”€â”€ SecurityConfig.java / JwtAuthenticationFilter.java
â”‚   â”œâ”€â”€ CustomAuthenticationEntryPoint.java
â”‚   â”œâ”€â”€ CustomAccessDeniedHandler.java
â”‚   â””â”€â”€ DevelopmentConfig.java
â”œâ”€â”€ exception        # ì˜ˆì™¸ í´ë˜ìŠ¤ (3ê°œ)
â”‚   â”œâ”€â”€ EntityNotFoundException.java
â”‚   â”œâ”€â”€ ValidationException.java
â”‚   â””â”€â”€ GlobalExceptionHandler.java
â”œâ”€â”€ oauth2/          # OAuth2 ê´€ë ¨ (í–¥í›„ êµ¬í˜„)
â”œâ”€â”€ security/        # Security ê´€ë ¨ (í–¥í›„ êµ¬í˜„)
â””â”€â”€ util/            # ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ (í–¥í›„ í™•ì¥)
```

## ğŸ“Š êµ¬í˜„ ì™„ë£Œ í˜„í™©

### **Backend êµ¬í˜„ ìƒíƒœ** âœ…
- **ì—”í‹°í‹° ê³„ì¸µ**: 12ê°œ ì—”í‹°í‹° ì™„ì„± (100%)
- **Repository ê³„ì¸µ**: 5ê°œ Repository ì™„ì„± (100%)
- **Service ê³„ì¸µ**: 7ê°œ Service ì™„ì„± (100%)
- **Controller ê³„ì¸µ**: 6ê°œ Controller ì™„ì„± (100%)
- **ì¸ì¦ ì‹œìŠ¤í…œ**: JWT ê¸°ë°˜ ì¸ì¦ ì™„ì„± (100%)
- **ì˜ˆì™¸ ì²˜ë¦¬**: ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ ì™„ì„± (100%)
- **ë°ì´í„° ê²€ì¦**: DTO ê¸°ë°˜ ê²€ì¦ ì™„ì„± (100%)

### **Frontend êµ¬í˜„ ìƒíƒœ** ğŸ”„
- **í…œí”Œë¦¿ êµ¬ì¡°**: Thymeleaf ê¸°ë³¸ êµ¬ì¡° ì™„ì„± (70%)
- **JavaScript ëª¨ë“ˆ**: ê³µí†µ ëª¨ë“ˆ êµ¬í˜„ í•„ìš” (0%)
- **CSS ìŠ¤íƒ€ì¼**: ë””ìì¸ ì‹œìŠ¤í…œ ì ìš© í•„ìš” (30%)
- **ë°˜ì‘í˜• ë””ìì¸**: íƒœë¸”ë¦¿/ë°ìŠ¤í¬í†± ëŒ€ì‘ í•„ìš” (20%)

## ğŸš€ ì„±ëŠ¥ ìµœì í™” íŒ

### **Repository ìµœì í™”** âœ…
- `@Query` ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë³µì¡í•œ ì¿¼ë¦¬ ìµœì í™”
- ì¸ë±ìŠ¤ í™œìš©ì„ ìœ„í•œ ì¿¼ë¦¬ ì‘ì„±
- N+1 ë¬¸ì œ ë°©ì§€ë¥¼ ìœ„í•œ fetch join ì‚¬ìš©
- BaseRepositoryì˜ ê³µí†µ ë©”ì„œë“œ í™œìš©

### **Service ìµœì í™”** âœ…
- íŠ¸ëœì­ì…˜ ë²”ìœ„ ìµœì†Œí™”
- ì½ê¸° ì „ìš© ë©”ì„œë“œì— `@Transactional(readOnly = true)` ì ìš©
- ë°°ì¹˜ ì²˜ë¦¬ ì‹œ `saveAll` ì‚¬ìš©
- BaseServiceì˜ ìƒëª…ì£¼ê¸° í›… í™œìš©

### **Controller ìµœì í™”** âœ…
- ì‘ë‹µ ë°ì´í„° í¬ê¸° ì œí•œ
- í˜ì´ì§• ì²˜ë¦¬ í™œìš© (BaseController ì§€ì›)
- ìºì‹± ì „ëµ ì ìš©
- REST API í‘œì¤€ ì¤€ìˆ˜

## ìµœê·¼ ì—…ë°ì´íŠ¸ (2025-09-01)

### OAuth2 ì†Œì…œ ë¡œê·¸ì¸ ë° ê³„ì • ì—°ë™ ê°œì„ 

#### 1. OAuth2 ì½œë°± ì²˜ë¦¬ ê°œì„ 
- **íŒŒì¼**: `OAuth2Controller.java`
- **ë³€ê²½ì‚¬í•­**:
  - `naverCallback`ê³¼ `kakaoCallback` ë©”ì„œë“œì— `mode` íŒŒë¼ë¯¸í„° ì¶”ê°€
  - `mode="link"`ì¼ ë•Œ ê¸°ì¡´ ì‚¬ìš©ìì—ê²Œ ì†Œì…œ ê³„ì • ì—°ë™ ê¸°ëŠ¥ êµ¬í˜„
  - `SocialUserInfo` ìƒì„± ì‹œ `providerUserId` íƒ€ì… ì˜¤ë¥˜ ìˆ˜ì • (`Long` â†’ `String`)

#### 2. OAuth2 ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤ í™•ì¥
- **íŒŒì¼**: `OAuth2Service.java`
- **ë³€ê²½ì‚¬í•­**:
  - `linkSocialAccountToUser` ë©”ì„œë“œ ì¶”ê°€
  - ê¸°ì¡´ ì‚¬ìš©ìì—ê²Œ ì†Œì…œ ê³„ì • ì—°ë™ ê¸°ëŠ¥ ì •ì˜

#### 3. OAuth2 ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ ì—…ë°ì´íŠ¸
- **íŒŒì¼**: `AbstractOAuth2Service.java`
- **ë³€ê²½ì‚¬í•­**:
  - `linkSocialAccountToUser` ë©”ì„œë“œ êµ¬í˜„
  - ê¸°ì¡´ `updateOrCreateSocialAccount` ë©”ì„œë“œë¥¼ ë˜í•‘í•˜ì—¬ ê³µê°œ ì¸í„°í˜ì´ìŠ¤ ì œê³µ

### í”„ë¡œí•„ ì´ë¯¸ì§€ í‘œì‹œ ì‹œìŠ¤í…œ ê°œì„ 

#### 1. ë°±ì—”ë“œ í”„ë¡œí•„ ì´ë¯¸ì§€ ìš°ì„ ìˆœìœ„ ë¡œì§
- **íŒŒì¼**: `AuthController.java`
- **ë³€ê²½ì‚¬í•­**:
  - í”„ë¡œí•„ ì´ë¯¸ì§€ ìš°ì„ ìˆœìœ„ êµ¬í˜„: ì‚¬ìš©ì ì—…ë¡œë“œ > ì†Œì…œ > ê¸°ë³¸ ì•„ì´ì½˜
  - `getCurrentUser` ë©”ì„œë“œì—ì„œ `UserSocialAccount` ì¡°íšŒ ë° ì´ë¯¸ì§€ íƒ€ì… êµ¬ë¶„
  - `profileImageUrl`, `socialProfileImage`, `socialProvider` í•„ë“œ ì¶”ê°€

#### 2. í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œí•„ ì´ë¯¸ì§€ í‘œì‹œ ê°œì„ 
- **íŒŒì¼**: `SessionUserProfile.js`
- **ë³€ê²½ì‚¬í•­**:
  - ì´ë¯¸ì§€ ë¡œë“œ ì—ëŸ¬ ì²˜ë¦¬ ë° ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€
  - ì´ë¯¸ì§€ ìš°ì„ ìˆœìœ„ ë¡œì§ êµ¬í˜„
  - ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ì¶”ê°€ë¡œ ì´ë¯¸ì§€ í‘œì‹œ ë³´ì¥
  - ì´ë¯¸ì§€ íƒ€ì… ë°°ì§€ í‘œì‹œ ê¸°ëŠ¥

#### 3. CSS ìŠ¤íƒ€ì¼ë§ ê°œì„ 
- **íŒŒì¼**: `frontend/src/styles/tablet/index.css`
- **ë³€ê²½ì‚¬í•­**:
  - `.user-avatar`ì— `position: relative` ì¶”ê°€
  - `.close-btn` ìŠ¤íƒ€ì¼ ê°œì„  (ê°€ì‹œì„± í–¥ìƒ)
  - í–„ë²„ê±° ë©”ë‰´ ë‹«ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ ê°œì„ 

### í–„ë²„ê±° ë©”ë‰´ ê°œì„ 

#### 1. ë‹«ê¸° ë²„íŠ¼ ê°€ì‹œì„± ê°œì„ 
- **íŒŒì¼**: `TabletHamburgerMenu.js`
- **ë³€ê²½ì‚¬í•­**:
  - Bootstrap Icons ëŒ€ì‹  ì§ì ‘ `âœ•` ë¬¸ì ì‚¬ìš©
  - ì•„ì´ì½˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì˜ì¡´ì„± ì œê±°

#### 2. CSS ìŠ¤íƒ€ì¼ë§ ê°œì„ 
- **íŒŒì¼**: `frontend/src/styles/tablet/index.css`
- **ë³€ê²½ì‚¬í•­**:
  - `.close-btn` ìŠ¤íƒ€ì¼ ê°œì„ :
    - `width`, `height` ì¦ê°€ (36px)
    - `background` ìƒ‰ìƒ ë³€ê²½ (`var(--gray-300)`)
    - `color` ë³€ê²½ (`var(--gray-900)`)
    - `font-size` ì¦ê°€ (`1.25rem`)
    - `font-weight: bold` ì¶”ê°€
    - í˜¸ë²„ íš¨ê³¼ ì¶”ê°€ (`transform: scale(1.05)`)

### ì„¸ì…˜ ê´€ë¦¬ ê°œì„ 

#### 1. í”„ë¡ íŠ¸ì—”ë“œ ì„¸ì…˜ ì²´í¬ ê°œì„ 
- **íŒŒì¼**: `sessionManager.js`
- **ë³€ê²½ì‚¬í•­**:
  - 401 Unauthorized ì‘ë‹µì„ ì •ìƒì ì¸ ìƒí™©ìœ¼ë¡œ ì²˜ë¦¬
  - ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ìƒíƒœì—ì„œì˜ ì˜¤ë¥˜ ë©”ì‹œì§€ ê°œì„ 
  - ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì²˜ë¦¬ ê°œì„ 

### í…ŒìŠ¤íŠ¸ ë°ì´í„° ê°œì„ 

#### 1. í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì í”„ë¡œí•„ ì´ë¯¸ì§€
- **íŒŒì¼**: `AuthController.java`
- **ë³€ê²½ì‚¬í•­**:
  - `testLogin` ë©”ì„œë“œì—ì„œ base64 ì¸ì½”ë”©ëœ SVG ì´ë¯¸ì§€ ì‚¬ìš©
  - ì™¸ë¶€ ì´ë¯¸ì§€ URL ëŒ€ì‹  ì•ˆì •ì ì¸ í…ŒìŠ¤íŠ¸ ì´ë¯¸ì§€ ì œê³µ

## ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

### í”„ë¡œí•„ ì´ë¯¸ì§€ ìš°ì„ ìˆœìœ„ ì‹œìŠ¤í…œ
```javascript
// ìš°ì„ ìˆœìœ„: ì‚¬ìš©ì ì—…ë¡œë“œ > ì†Œì…œ > ê¸°ë³¸ ì•„ì´ì½˜
if (user.getProfileImageUrl() != null && !user.getProfileImageUrl().trim().isEmpty()) {
    // ì‚¬ìš©ìê°€ ì§ì ‘ ì—…ë¡œë“œí•œ ì´ë¯¸ì§€
    profileImageUrl = user.getProfileImageUrl();
} else if (!socialAccounts.isEmpty()) {
    // ì†Œì…œ ê³„ì • ì´ë¯¸ì§€
    socialProfileImage = primarySocialAccount.getProviderProfileImage();
    socialProvider = primarySocialAccount.getProvider();
}
```

### OAuth2 ê³„ì • ì—°ë™ í”Œë¡œìš°
```java
// ê³„ì • ì—°ë™ ëª¨ë“œ ì²˜ë¦¬
if ("link".equals(mode)) {
    SocialUserInfo socialUserInfo = new SocialUserInfo();
    socialUserInfo.setProviderUserId(String.valueOf(userInfo.getId()));
    // ... ê¸°íƒ€ ì •ë³´ ì„¤ì •
    oauth2Service.linkSocialAccountToUser(currentUser.getId(), socialUserInfo);
}
```

### ì´ë¯¸ì§€ íƒ€ì… ë°°ì§€ ì‹œìŠ¤í…œ
- **ì‚¬ìš©ì**: ì‚¬ìš©ìê°€ ì§ì ‘ ì—…ë¡œë“œí•œ ì´ë¯¸ì§€
- **ì†Œì…œ**: ì†Œì…œ ê³„ì •ì—ì„œ ê°€ì ¸ì˜¨ ì´ë¯¸ì§€ (NAVER, KAKAO ë“±)
- **ê¸°ë³¸**: ê¸°ë³¸ ì•„ì´ì½˜

## í•´ê²°ëœ ë¬¸ì œë“¤

1. **OAuth2 ê³„ì • ì—°ë™ ì‹¤íŒ¨**: `mode` íŒŒë¼ë¯¸í„°ì™€ ì—°ë™ ë¡œì§ êµ¬í˜„
2. **í”„ë¡œí•„ ì´ë¯¸ì§€ í‘œì‹œ ì•ˆë¨**: ìš°ì„ ìˆœìœ„ ì‹œìŠ¤í…œ ë° CSS ìŠ¤íƒ€ì¼ë§ ê°œì„ 
3. **í–„ë²„ê±° ë©”ë‰´ ë‹«ê¸° ë²„íŠ¼ ê°€ì‹œì„±**: ì§ì ‘ ë¬¸ì ì‚¬ìš© ë° ìŠ¤íƒ€ì¼ ê°œì„ 
4. **ì„¸ì…˜ ì²´í¬ ì˜¤ë¥˜ ë©”ì‹œì§€**: 401 ì‘ë‹µì„ ì •ìƒì ì¸ ìƒí™©ìœ¼ë¡œ ì²˜ë¦¬
5. **íƒ€ì… ì˜¤ë¥˜**: `providerUserId` íƒ€ì… ë³€í™˜ ë¬¸ì œ í•´ê²°

## ë‹¤ìŒ ë‹¨ê³„

1. í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
2. ì†Œì…œ ê³„ì • ì—°ë™ ê¸°ëŠ¥ ì™„ì „ í…ŒìŠ¤íŠ¸
3. í–„ë²„ê±° ë©”ë‰´ ë™ì‘ í™•ì¸
4. ì „ì²´ UI/UX ê²€ì¦
