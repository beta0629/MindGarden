# 권한 확장 시스템 특화 계획

## 1. 개요

### 1.1 목적
- **소상공인 맞춤형 권한 관리 시스템 특화** (핵심 가치)
- 복잡한 권한 설정 없이 간단하게 운영 가능
- 업종별, 역할별 세밀한 권한 관리
- 상품성 있는 권한 관리 UI/UX

### 1.2 핵심 가치 제안
- ✅ **간편함**: 복잡한 권한 설정 없이 템플릿 기반 자동 설정
- ✅ **유연성**: 업종별, 역할별 세밀한 권한 커스터마이징
- ✅ **보안**: ABAC 기반 세밀한 접근 제어
- ✅ **확장성**: 새로운 업종 추가 시 권한 템플릿 자동 적용

## 2. 현재 상태

### 2.1 구현된 기능
- ✅ `RoleTemplate` - 업종별 기본 역할 템플릿
- ✅ `RoleTemplatePermission` - 템플릿별 권한 목록
- ✅ `RoleTemplateMapping` - 업종별 템플릿 자동 매핑
- ✅ `TenantRole` - 테넌트 커스텀 역할
- ✅ `RolePermission` - 테넌트 역할별 권한 (ABAC 정책 포함)
- ✅ `DynamicPermissionService` - 동적 권한 관리 서비스

### 2.2 개선 필요 사항
- ⚠️ 권한 템플릿 UI/UX 개선 필요
- ⚠️ 업종별 권한 템플릿 확장 필요
- ⚠️ 권한 관리 대시보드 필요
- ⚠️ 권한 변경 이력 및 감사 로그 강화

## 3. 특화 전략

### 3.1 업종별 권한 템플릿 확장

**현재 템플릿:**
- CONSULTATION (상담소)
- ACADEMY (학원)

**추가 예정:**
- FOOD_SERVICE (요식업)
- CAFE (카페)
- RETAIL (소매)
- BEAUTY (미용)
- HEALTH (건강)

**템플릿 구조:**
```json
{
  "role_template_code": "ACADEMY_TEACHER",
  "business_type": "ACADEMY",
  "permissions": [
    {
      "permission_code": "VIEW_CLASS",
      "scope": "BRANCH",
      "policy": {
        "branch_id": "${user.branch_id}"
      }
    },
    {
      "permission_code": "MANAGE_ATTENDANCE",
      "scope": "SELF",
      "policy": {
        "teacher_id": "${user.id}"
      }
    }
  ]
}
```

### 3.2 ABAC 정책 확장

**현재 지원:**
- `tenant_id` 기반 필터링
- `branch_id` 기반 필터링
- `user_id` 기반 필터링

**확장 예정:**
- `business_type` 기반 필터링
- `role` 기반 필터링
- `time_based` 정책 (시간대별 접근 제어)
- `location_based` 정책 (위치 기반 접근 제어)

### 3.3 권한 관리 UI/UX 개선

**간편한 권한 설정:**
- 템플릿 선택 → 자동 권한 부여
- 드래그 앤 드롭으로 권한 추가/제거
- 권한 미리보기 (이 권한으로 무엇을 할 수 있는지)

**권한 관리 대시보드:**
- 역할별 권한 현황
- 사용자별 권한 현황
- 권한 변경 이력
- 권한 충돌 감지

### 3.4 권한 감사 및 로깅

**감사 로그:**
- 권한 부여/회수 이력
- 권한 사용 이력
- 권한 변경 감지 알림

**보안 강화:**
- 권한 변경 승인 프로세스
- 권한 변경 알림
- 비정상 권한 사용 감지

## 4. 구현 계획

### Phase 1: 권한 템플릿 확장 (1주)
- [ ] 업종별 권한 템플릿 추가
- [ ] 권한 템플릿 UI 개선
- [ ] 템플릿 기반 자동 권한 부여

### Phase 2: ABAC 정책 확장 (1주)
- [ ] 확장된 ABAC 정책 지원
- [ ] 정책 엔진 개선
- [ ] 정책 테스트 도구

### Phase 3: 권한 관리 UI/UX 개선 (1주)
- [ ] 권한 관리 대시보드
- [ ] 간편한 권한 설정 UI
- [ ] 권한 미리보기 기능

### Phase 4: 권한 감사 및 로깅 (1주)
- [ ] 권한 변경 이력 관리
- [ ] 권한 사용 로깅
- [ ] 보안 강화 기능

## 5. 상품성 강화

### 5.1 마케팅 포인트
- "복잡한 권한 설정 없이 템플릿으로 간편하게"
- "업종별 맞춤 권한 템플릿 자동 제공"
- "세밀한 접근 제어로 보안 강화"
- "권한 변경 이력으로 감사 준수"

### 5.2 차별화 요소
- 업종별 권한 템플릿 자동 제공
- ABAC 기반 세밀한 접근 제어
- 간편한 권한 관리 UI
- 권한 감사 및 로깅

