<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation</title>
</head>
<body>
    
    <!-- Navigation Fragment -->
    <nav th:fragment="navigation" class="navigation">
        
        <!-- Desktop Navigation -->
        <div class="desktop-navigation d-none d-lg-block">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12">
                        <ul class="nav nav-tabs nav-fill">
                            <li class="nav-item">
                                <a class="nav-link" th:classappend="${#httpServletRequest.requestURI == '/' ? 'active' : ''}" th:href="@{/}">
                                    <i class="bi bi-speedometer2"></i>
                                    <span>대시보드</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" th:classappend="${#strings.startsWith(#httpServletRequest.requestURI, '/consultation') ? 'active' : ''}" th:href="@{/consultation}">
                                    <i class="bi bi-calendar-event"></i>
                                    <span>상담일정</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" th:classappend="${#strings.startsWith(#httpServletRequest.requestURI, '/clients') ? 'active' : ''}" th:href="@{/clients}">
                                    <i class="bi bi-people-fill"></i>
                                    <span>내담자</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" th:classappend="${#strings.startsWith(#httpServletRequest.requestURI, '/records') ? 'active' : ''}" th:href="@{/records}">
                                    <i class="bi bi-journal-text"></i>
                                    <span>상담일지</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" th:classappend="${#strings.startsWith(#httpServletRequest.requestURI, '/reports') ? 'active' : ''}" th:href="@{/reports}">
                                    <i class="bi bi-bar-chart"></i>
                                    <span>리포트</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" th:classappend="${#strings.startsWith(#httpServletRequest.requestURI, '/settings') ? 'active' : ''}" th:href="@{/settings}">
                                    <i class="bi bi-gear"></i>
                                    <span>설정</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tablet Navigation (Hamburger Menu) -->
        <div class="tablet-navigation d-lg-none">
            <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileMenu" aria-labelledby="mobileMenuLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="mobileMenuLabel">
                        <i class="bi bi-list"></i>
                        <span>메뉴</span>
                    </h5>
                    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <div class="mobile-nav">
                        
                        <!-- User Info Section -->
                        <div class="mobile-user-info">
                            <div class="user-profile">
                                <div class="user-avatar">
                                    <img th:if="${currentUser.profileImage}" th:src="${currentUser.profileImage}" alt="프로필" class="avatar-image">
                                    <div th:unless="${currentUser.profileImage}" class="avatar-placeholder">
                                        <i class="bi bi-person"></i>
                                    </div>
                                </div>
                                <div class="user-details">
                                    <div class="user-name" th:text="${currentUser.name}">사용자명</div>
                                    <div class="user-role" th:text="${currentUser.role}">역할</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Navigation Menu -->
                        <ul class="mobile-nav-list">
                            <li class="mobile-nav-item">
                                <a class="mobile-nav-link" th:classappend="${#httpServletRequest.requestURI == '/' ? 'active' : ''}" th:href="@{/}">
                                    <i class="bi bi-speedometer2"></i>
                                    <span>대시보드</span>
                                </a>
                            </li>
                            <li class="mobile-nav-item">
                                <a class="mobile-nav-link" th:classappend="${#strings.startsWith(#httpServletRequest.requestURI, '/consultation') ? 'active' : ''}" th:href="@{/consultation}">
                                    <i class="bi bi-calendar-event"></i>
                                    <span>상담일정</span>
                                </a>
                            </li>
                            <li class="mobile-nav-item">
                                <a class="mobile-nav-link" th:classappend="${#strings.startsWith(#httpServletRequest.requestURI, '/clients') ? 'active' : ''}" th:href="@{/clients}">
                                    <i class="bi bi-people-fill"></i>
                                    <span>내담자</span>
                                </a>
                            </li>
                            <li class="mobile-nav-item">
                                <a class="mobile-nav-link" th:classappend="${#strings.startsWith(#httpServletRequest.requestURI, '/records') ? 'active' : ''}" th:href="@{/records}">
                                    <i class="bi bi-journal-text"></i>
                                    <span>상담일지</span>
                                </a>
                            </li>
                            <li class="mobile-nav-item">
                                <a class="mobile-nav-link" th:classappend="${#strings.startsWith(#httpServletRequest.requestURI, '/reports') ? 'active' : ''}" th:href="@{/reports}">
                                    <i class="bi bi-bar-chart"></i>
                                    <span>리포트</span>
                                </a>
                            </li>
                            <li class="mobile-nav-item">
                                <a class="mobile-nav-link" th:classappend="${#strings.startsWith(#httpServletRequest.requestURI, '/settings') ? 'active' : ''}" th:href="@{/settings}">
                                    <i class="bi bi-gear"></i>
                                    <span>설정</span>
                                </a>
                            </li>
                        </ul>
                        
                        <!-- Quick Actions -->
                        <div class="mobile-quick-actions">
                            <h6 class="quick-actions-title">빠른 작업</h6>
                            <div class="quick-actions-grid">
                                <button class="btn btn-outline-primary quick-action-btn" type="button" data-bs-toggle="modal" data-bs-target="#newConsultationModal">
                                    <i class="bi bi-plus-circle"></i>
                                    <span>새 상담</span>
                                </button>
                                <button class="btn btn-outline-success quick-action-btn" type="button" data-bs-toggle="modal" data-bs-target="#newClientModal">
                                    <i class="bi bi-person-plus"></i>
                                    <span>새 내담자</span>
                                </button>
                                <button class="btn btn-outline-info quick-action-btn" type="button" data-bs-toggle="modal" data-bs-target="#scheduleModal">
                                    <i class="bi bi-calendar-plus"></i>
                                    <span>일정 추가</span>
                                </button>
                                <button class="btn btn-outline-warning quick-action-btn" type="button" data-bs-toggle="modal" data-bs-target="#reminderModal">
                                    <i class="bi bi-bell"></i>
                                    <span>알림 설정</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Notifications -->
                        <div class="mobile-notifications">
                            <h6 class="notifications-title">알림</h6>
                            <div class="notification-list">
                                <div th:if="${#lists.isEmpty(notifications)}" class="text-center py-3">
                                    <span class="text-muted">새로운 알림이 없습니다</span>
                                </div>
                                <div th:each="notification : ${notifications}" class="notification-item">
                                    <div class="notification-icon">
                                        <i class="bi bi-info-circle text-primary"></i>
                                    </div>
                                    <div class="notification-content">
                                        <div class="notification-title" th:text="${notification.title}">알림 제목</div>
                                        <div class="notification-time" th:text="${#temporals.format(notification.createdAt, 'MM/dd HH:mm')}">시간</div>
                                    </div>
                                </div>
                            </div>
                            <div class="notifications-footer">
                                <a th:href="@{/notifications}" class="btn btn-outline-primary btn-sm w-100">모든 알림 보기</a>
                            </div>
                        </div>
                        
                        <!-- Footer Actions -->
                        <div class="mobile-footer-actions">
                            <div class="row g-2">
                                <div class="col-6">
                                    <a th:href="@{/profile}" class="btn btn-outline-secondary btn-sm w-100">
                                        <i class="bi bi-person"></i>
                                        <span>프로필</span>
                                    </a>
                                </div>
                                <div class="col-6">
                                    <a th:href="@{/logout}" class="btn btn-outline-danger btn-sm w-100">
                                        <i class="bi bi-box-arrow-right"></i>
                                        <span>로그아웃</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Breadcrumb Navigation -->
        <div class="breadcrumb-navigation">
            <div class="container-fluid">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a th:href="@{/}">
                                <i class="bi bi-house"></i>
                                <span>홈</span>
                            </a>
                        </li>
                        <li th:each="breadcrumb : ${breadcrumbs}" class="breadcrumb-item" th:classappend="${breadcrumb.active ? 'active' : ''}">
                            <a th:if="${!breadcrumb.active}" th:href="${breadcrumb.url}" th:text="${breadcrumb.label}">메뉴</a>
                            <span th:if="${breadcrumb.active}" th:text="${breadcrumb.label}">현재 메뉴</span>
                        </li>
                    </ol>
                </nav>
            </div>
        </div>
        
    </nav>
    
</body>
</html>
