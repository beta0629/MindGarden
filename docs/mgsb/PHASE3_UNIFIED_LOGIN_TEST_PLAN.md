# Phase 3 통합 로그인 시스템 테스트 계획

## 테스트 목표
Phase 3에서 구현한 통합 로그인 시스템의 프론트엔드 기능을 검증합니다.

## 테스트 환경
- 프론트엔드: `http://localhost:3000`
- 백엔드: `http://localhost:8080`
- 통합 로그인 페이지: `/login`

## 테스트 시나리오

### 1. ID/PW 로그인 테스트

#### 1.1 단일 테넌트 사용자 로그인
**목적**: 단일 테넌트에만 접근 가능한 사용자의 로그인 플로우 검증

**절차**:
1. `/login` 페이지 접속
2. 이메일과 비밀번호 입력
3. 로그인 버튼 클릭
4. 로그인 성공 확인
5. 멀티 테넌트 확인 API 호출 (`/api/auth/tenant/check-multi`)
6. 단일 테넌트 사용자로 확인되면 바로 대시보드로 리다이렉트
7. 역할에 맞는 대시보드 페이지 표시 확인

**예상 결과**:
- ✅ 로그인 성공 메시지 표시
- ✅ 멀티 테넌트 확인 API 호출
- ✅ 테넌트 선택 화면 표시 안 됨
- ✅ 역할별 대시보드로 자동 리다이렉트
- ✅ JWT 토큰에 `tenantId`, `branchId`, `permissions` 포함 확인

#### 1.2 멀티 테넌트 사용자 로그인
**목적**: 여러 테넌트에 접근 가능한 사용자의 로그인 플로우 검증

**절차**:
1. `/login` 페이지 접속
2. 멀티 테넌트 사용자 계정으로 로그인
3. 로그인 성공 확인
4. 멀티 테넌트 확인 API 호출
5. 멀티 테넌트 사용자로 확인되면 테넌트 선택 화면 표시
6. 테넌트 선택
7. 테넌트 전환 API 호출 (`/api/auth/tenant/switch`)
8. 선택한 테넌트로 대시보드 리다이렉트

**예상 결과**:
- ✅ 로그인 성공 메시지 표시
- ✅ 멀티 테넌트 확인 API 호출
- ✅ 테넌트 선택 화면 표시
- ✅ 접근 가능한 테넌트 목록 표시
- ✅ 테넌트 선택 후 전환 API 호출
- ✅ 선택한 테넌트로 대시보드 리다이렉트

### 2. 소셜 로그인 테스트

#### 2.1 카카오 로그인
**목적**: 카카오 소셜 로그인 플로우 검증

**절차**:
1. `/login` 페이지 접속
2. "카카오로 로그인" 버튼 클릭
3. 카카오 인증 페이지로 리다이렉트
4. 카카오 계정으로 로그인
5. OAuth 콜백 처리 (`/auth/oauth2/callback`)
6. 멀티 테넌트 확인 및 리다이렉트

**예상 결과**:
- ✅ 카카오 인증 페이지로 리다이렉트
- ✅ OAuth 콜백 처리 성공
- ✅ JWT 토큰 생성 (tenantId, branchId, permissions 포함)
- ✅ 멀티 테넌트 확인 및 적절한 화면 표시

#### 2.2 네이버 로그인
**목적**: 네이버 소셜 로그인 플로우 검증

**절차**: 카카오 로그인과 동일

**예상 결과**: 카카오 로그인과 동일

#### 2.3 구글 로그인
**목적**: 구글 소셜 로그인 플로우 검증

**절차**: 카카오 로그인과 동일

**예상 결과**: 카카오 로그인과 동일

### 3. 테넌트 전환 테스트

#### 3.1 테넌트 선택 및 전환
**목적**: 멀티 테넌트 사용자의 테넌트 전환 기능 검증

**절차**:
1. 멀티 테넌트 사용자로 로그인
2. 테넌트 선택 화면에서 다른 테넌트 선택
3. 테넌트 전환 API 호출
4. 세션 정보 업데이트 확인
5. 새로운 테넌트의 대시보드로 리다이렉트

**예상 결과**:
- ✅ 테넌트 전환 API 호출 성공
- ✅ 세션에 새로운 `tenantId` 저장
- ✅ `TenantContextHolder` 업데이트
- ✅ 새로운 테넌트의 대시보드로 리다이렉트

### 4. 에러 처리 테스트

#### 4.1 잘못된 로그인 정보
**목적**: 잘못된 로그인 정보 입력 시 에러 처리 검증

**절차**:
1. `/login` 페이지 접속
2. 잘못된 이메일 또는 비밀번호 입력
3. 로그인 버튼 클릭

**예상 결과**:
- ✅ 에러 메시지 표시 ("아이디 또는 비밀번호가 틀리니 다시 확인하시고 입력해주세요")
- ✅ 로그인 페이지에 머무름

#### 4.2 네트워크 오류
**목적**: 네트워크 오류 시 에러 처리 검증

**절차**:
1. 백엔드 서버 중지
2. 로그인 시도

**예상 결과**:
- ✅ 네트워크 오류 메시지 표시
- ✅ 로그인 페이지에 머무름

### 5. 세션 관리 테스트

#### 5.1 기존 세션 확인
**목적**: 이미 로그인된 사용자의 세션 확인 검증

**절차**:
1. 이미 로그인된 상태에서 `/login` 페이지 접속
2. 세션 확인 API 호출 (`/api/auth/current-user`)
3. 세션이 있으면 대시보드로 리다이렉트

**예상 결과**:
- ✅ 세션 확인 API 호출
- ✅ 세션이 있으면 자동으로 대시보드로 리다이렉트
- ✅ 로그인 페이지에 머무르지 않음

## 테스트 체크리스트

### 기능 테스트
- [ ] ID/PW 로그인 (단일 테넌트)
- [ ] ID/PW 로그인 (멀티 테넌트)
- [ ] 카카오 소셜 로그인
- [ ] 네이버 소셜 로그인
- [ ] 구글 소셜 로그인
- [ ] 테넌트 선택 화면 표시
- [ ] 테넌트 전환
- [ ] 역할별 대시보드 리다이렉트

### 에러 처리 테스트
- [ ] 잘못된 로그인 정보
- [ ] 네트워크 오류
- [ ] 세션 만료

### UI/UX 테스트
- [ ] 로그인 폼 표시
- [ ] 소셜 로그인 버튼 표시
- [ ] 로딩 상태 표시
- [ ] 에러 메시지 표시
- [ ] 성공 메시지 표시
- [ ] 테넌트 선택 화면 UI

## 테스트 실행 방법

1. 백엔드 서버 시작:
   ```bash
   ./scripts/start-backend.sh local
   ```

2. 프론트엔드 서버 시작:
   ```bash
   cd frontend
   npm start
   ```

3. 브라우저에서 `http://localhost:3000/login` 접속

4. 위의 테스트 시나리오 순서대로 테스트 실행

## 테스트 결과 기록

테스트 결과는 아래 형식으로 기록합니다:

```
### 테스트 시나리오: [시나리오 이름]
- 날짜: YYYY-MM-DD
- 테스터: [이름]
- 결과: ✅ 성공 / ❌ 실패
- 비고: [문제점 또는 개선사항]
```

